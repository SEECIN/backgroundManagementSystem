{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\电商管理\\background-manage-system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\电商管理\\background-manage-system\\src\\components\\main-content\\component\\Table.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\电商管理\\background-manage-system\\src\\components\\main-content\\component\\Table.vue","mtime":1666863058949},{"path":"C:\\Users\\Administrator\\Desktop\\电商管理\\background-manage-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1654578877485},{"path":"C:\\Users\\Administrator\\Desktop\\电商管理\\background-manage-system\\node_modules\\babel-loader\\lib\\index.js","mtime":1654578881393},{"path":"C:\\Users\\Administrator\\Desktop\\电商管理\\background-manage-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1654578877485},{"path":"C:\\Users\\Administrator\\Desktop\\电商管理\\background-manage-system\\node_modules\\vue-loader\\lib\\index.js","mtime":1654578883487}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgdnVlc2Nyb2xsIGZyb20gInZ1ZXNjcm9sbCINCmltcG9ydCBNSVhJTiBmcm9tICdAL2NvcmUvbWl4aW4nDQppbXBvcnQgbWVzc2FnZSBmcm9tICdAL3BsdWdpbnMvbWVzc2FnZScNCmltcG9ydCBUQUJMRV9IRUFEX0RBVEEgZnJvbSAnQC9jb25maWcvdGFibGVIZWFkLmNvbmZpZy5qcycNCmltcG9ydCBNRVNTQUdFX0RBVEEgZnJvbSAnQC9jb25maWcvbWVzc2FnZS5jb25maWcuanMnDQppbXBvcnQgeyBNZXNzYWdlIH0gZnJvbSAnZWxlbWVudC11aScNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogJ1RhYmxlJywNCiAgY29tcG9uZW50czogew0KICAgIHZ1ZXNjcm9sbA0KICB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICB0YWJsZUhlYWREYXRhOiBbXSwNCiAgICAgIHRyYW5zbWl0RGF0YToge30sDQogICAgICBwcm9kdWN0Rm9ybURhdGE6IHt9LA0KICAgICAgZGlhbG9nSW1hZ2VVcmw6ICcnLA0KICAgICAgZGlhbG9nVmlzaWJsZTogZmFsc2UsDQogICAgICBvcHM6IHsNCiAgICAgICAgdnVlc2Nyb2xsOiB7DQogICAgICAgICAgbW9kZTogJ25hdGl2ZScsDQogICAgICAgICAgc2l6ZVN0cmF0ZWd5OiAnMTIwcHgnLA0KICAgICAgICAgIGRldGVjdFJlc2l6ZTogZmFsc2UsDQogICAgICAgICAgLyoqIOmUgeWumuS4gOenjea7muWKqOaWueWQke+8jCDplIHlrprnmoTmlrnlkJHkuLrmsLTlubPmiJbogIXlnoLnm7TmlrnlkJHkuIrmu5Hliqjot53nprvovoPlpKfnmoTpgqPkuKrmlrnlkJEgKi8NCiAgICAgICAgICBsb2NraW5nOiBmYWxzZSwNCiAgICAgICAgfSwNCiAgICAgICAgc2Nyb2xsUGFuZWw6IHsNCiAgICAgICAgICBpbml0aWFsU2Nyb2xsWTogZmFsc2UsDQogICAgICAgICAgaW5pdGlhbFNjcm9sbFg6IGZhbHNlLA0KICAgICAgICAgIHNjcm9sbGluZ1g6IHRydWUsDQogICAgICAgICAgc2Nyb2xsaW5nWTogZmFsc2UsDQogICAgICAgICAgc3BlZWQ6IDMwMCwNCiAgICAgICAgICBlYXNpbmc6IHVuZGVmaW5lZCwNCiAgICAgICAgICB2ZXJ0aWNhbE5hdGl2ZUJhclBvczogJ3JpZ2h0JywNCiAgICAgICAgICBtYXhIZWlnaHQ6IHVuZGVmaW5lZCwNCiAgICAgICAgICBtYXhXaWR0aDogdW5kZWZpbmVkLA0KICAgICAgICB9LA0KICAgICAgICBiYXI6IHsNCiAgICAgICAgICBzaG93RGVsYXk6IDUwMCwNCiAgICAgICAgICBvbmx5U2hvd0Jhck9uU2Nyb2xsOiBmYWxzZSwNCiAgICAgICAgICBrZWVwU2hvdzogZmFsc2UsDQogICAgICAgICAgYmFja2dyb3VuZDogJyNjMWMxYzEnLA0KICAgICAgICAgIG9wYWNpdHk6IDEsDQogICAgICAgICAgaG92ZXJTdHlsZTogZmFsc2UsDQogICAgICAgICAgc3BlY2lmeUJvcmRlclJhZGl1czogZmFsc2UsDQogICAgICAgICAgbWluU2l6ZTogZmFsc2UsDQogICAgICAgICAgc2l6ZTogJzZweCcsDQogICAgICAgICAgZGlzYWJsZTogZmFsc2UsDQogICAgICAgIH0NCiAgICAgIH0sDQogICAgICB1cGxvYWRGaWxlc1ByZXZpZXc6IHt9LA0KICAgICAgdXBsb2FkUHJldmlld3M6IHt9DQogICAgfQ0KICB9LA0KICBtaXhpbnM6IFtNSVhJTl0sDQogIHByb3BzOiB7DQogICAgdGFibGVEYXRhOiB7DQogICAgICB0eXBlOiBBcnJheQ0KICAgIH0NCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLnRhYmxlSGVhZERhdGEgPSBUQUJMRV9IRUFEX0RBVEFbdGhpcy4kcm91dGUubmFtZV0NCiAgfSwNCiAgY29tcHV0ZWQ6IHsNCiAgICBtYXhIZWlnaHQoKSB7DQogICAgICByZXR1cm4gKHdpbmRvdy5pbm5lckhlaWdodCAtIDMxMCkgKyAncHgnDQogICAgfSwNCiAgICBleHBhbmQoKSB7DQogICAgICByZXR1cm4gVEFCTEVfSEVBRF9EQVRBW3RoaXMuJHJvdXRlLm5hbWVdPy5leHBhbmQNCiAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBhc3luYyBoYW5kbGVDaGFuZ2VTd2l0Y2gocm93LCBtZXNzYWdlVHlwZSwgdHlwZSkgew0KICAgICAgbGV0IG1zZ0luZm8gPSBNRVNTQUdFX0RBVEFbbWVzc2FnZVR5cGVdW051bWJlcihyb3cuc3RhdHVzKV0ubWVzc2FnZQ0KICAgICAgbWVzc2FnZSh7DQogICAgICAgIG1lc3NhZ2VJbmZvOiBtc2dJbmZvLCBjb25maXJtQ2FsbGJhY2s6IGFzeW5jICgpID0+IHsNCiAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgcm93LnN0YXR1cyA9IHJvdy5zdGF0dXMgPyAwIDogMQ0KICAgICAgICAgICAgYXdhaXQgdGhpcy4kYXhpb3ModHlwZSwgcm93KQ0KICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7DQogICAgICAgICAgICByb3cuc3RhdHVzID0gcm93LnN0YXR1cyA/IDAgOiAxDQogICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgIH0sDQogICAgYXN5bmMgaGFubGRlQ2xpY2tCdXR0b24odHlwZSwgaXRlbSkgew0KICAgICAgbGV0IF9pdGVtID0gT2JqZWN0LmFzc2lnbih7fSwgaXRlbSkNCiAgICAgIGlmICh0eXBlLmluY2x1ZGVzKCdlZGl0JykpIHsNCiAgICAgICAgdGhpcy4kYnVzLiRlbWl0KCd0cmFuc21pdEZvcm1EYXRhJywgX2l0ZW0pDQogICAgICAgIHRoaXMub3Blbk1vZGFsKHR5cGUpDQogICAgICB9DQogICAgICBpZiAodHlwZS5pbmNsdWRlcygnZGVsZXRlJykpIHsNCiAgICAgICAgbWVzc2FnZSh7DQogICAgICAgICAgbWVzc2FnZUluZm86ICLmmK/lkKbopoHliKDpmaTmraTmlbDmja7vvIzliKDpmaTlkI7kuI3lj6/mgaLlpI0iLCBjb25maXJtQ2FsbGJhY2s6IGFzeW5jICgpID0+IHsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgIGxldCByZXN1bHQgPSBhd2FpdCB0aGlzLiRheGlvcyh0eXBlLCBfaXRlbSkNCiAgICAgICAgICAgICAgbGV0IGRhdGEgPSB0eXBlID09PSAiZGVsZXRlUHJvZHVjdHNDYXRlZ29yeSIgPyByZXN1bHQuZGF0YS5yZXN1bHQgOiBfaXRlbQ0KICAgICAgICAgICAgICB0aGlzLiRidXMuJGVtaXQoJ2NoYW5nZURhdGEnLCBkYXRhLCB0eXBlKQ0KICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gImRlbGV0ZVByb2R1Y3RzQ2F0ZWdvcnkiKSB7DQogICAgICAgICAgICAgICAgdGhpcy4kYnVzLiRlbWl0KCdmb3JtYXRTZWxlY3RPcHRpb25zJykNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IsICJ0YWJsZSIpDQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9KQ0KICAgICAgfQ0KICAgIH0sDQogICAgc2hvd1ByZXZpZXcoaW1hZ2VVcmwpIHsNCiAgICAgIHRoaXMuJHJlZnMucHJldmlld0ltZy5tYXAoaXRlbSA9PiB7DQogICAgICAgIGlmIChpdGVtLnNyYyA9PT0gaW1hZ2VVcmwpIGl0ZW0uc2hvd1ZpZXdlciA9IHRydWUNCiAgICAgIH0pDQogICAgfSwNCiAgICBhc3luYyBoYW5kbGVJbWFnZURlbGV0ZShkZWxldGVJbWFnZVVybCwgcHJvZHVjdERhdGEpIHsNCiAgICAgIG1lc3NhZ2Uoew0KICAgICAgICBtZXNzYWdlSW5mbzogIuaYr+WQpuWIoOmZpOatpOWbvueJh++8jOWIoOmZpOWQjuS4jeWPr+aBouWkjSIsIGNvbmZpcm1DYWxsYmFjazogYXN5bmMgKCkgPT4gew0KICAgICAgICAgIGxldCBkYXRhID0geyBpZDogcHJvZHVjdERhdGEuaWQsIGRlbGV0ZUltYWdlVXJsIH0NCiAgICAgICAgICBsZXQgcmVzdWx0ID0gYXdhaXQgdGhpcy4kYXhpb3MoImVkaXRQcm9kdWN0IiwgZGF0YSkNCiAgICAgICAgICB0aGlzLiRidXMuJGVtaXQoJ2NoYW5nZURhdGEnLCByZXN1bHQuZGF0YS5yZXN1bHQpDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfSwNCiAgICBoYW5kbGVVcGxvYWRDaGFuZ2UoZmlsZSwgaWQpIHsNCiAgICAgIGxldCBtYXhTaXplID0gNSAqIDEwMjQgKiAxMDI0DQogICAgICBpZiAoZmlsZS5zaXplID4gbWF4U2l6ZSkgew0KICAgICAgICBNZXNzYWdlKHsNCiAgICAgICAgICB0eXBlOiAid2FybmluZyIsDQogICAgICAgICAgbWVzc2FnZTogIuaWh+S7tuS4jeW+l+Wkp+S6jjVNIg0KICAgICAgICB9KQ0KICAgICAgICByZXR1cm4gZmFsc2UNCiAgICAgIH0NCiAgICAgIGlmICghKC9pbWFnZS9nLnRlc3QoZmlsZS5yYXcudHlwZSkpKSB7DQogICAgICAgIE1lc3NhZ2Uoew0KICAgICAgICAgIHR5cGU6ICJ3YXJuaW5nIiwNCiAgICAgICAgICBtZXNzYWdlOiAi5Y+q6IO96YCJ5oup5Zu+54mH5qC85byP55qE5paH5Lu2Ig0KICAgICAgICB9KQ0KICAgICAgICByZXR1cm4gZmFsc2UNCiAgICAgIH0NCiAgICAgIHRoaXMudXBsb2FkRmlsZXNQcmV2aWV3W2lkXS5wdXNoKGZpbGUpDQogICAgICB0aGlzLnVwbG9hZFByZXZpZXdzW2lkXS5wdXNoKGZpbGUudXJsKQ0KICAgICAgdGhpcy5wcm9kdWN0Rm9ybURhdGFbaWRdLmFwcGVuZChpZCArIGZpbGUudWlkLCBmaWxlLnJhdykNCiAgICB9LA0KICAgIGFzeW5jIGhhbmRsZUltYWdlVXBsb2FkKGlkKSB7DQogICAgICBpZiAodGhpcy51cGxvYWRGaWxlc1ByZXZpZXdbaWRdLmxlbmd0aCA9PT0gMCkgew0KICAgICAgICBNZXNzYWdlKHsNCiAgICAgICAgICB0eXBlOiAid2FybmluZyIsDQogICAgICAgICAgbWVzc2FnZTogIuacqumAieaLqeWbvueJhyINCiAgICAgICAgfSkNCiAgICAgICAgcmV0dXJuIGZhbHNlDQogICAgICB9DQogICAgICB0aGlzLnByb2R1Y3RGb3JtRGF0YVtpZF0uYXBwZW5kKCJpZCIsIGlkKQ0KICAgICAgdHJ5IHsNCiAgICAgICAgbGV0IHJlc3VsdCA9IGF3YWl0IHRoaXMuJGF4aW9zKCJhZGRQcm9kdWN0IiwgdGhpcy5wcm9kdWN0Rm9ybURhdGFbaWRdKQ0KICAgICAgICB0aGlzLiRidXMuJGVtaXQoJ2NoYW5nZURhdGEnLCByZXN1bHQuZGF0YS5yZXN1bHQpDQogICAgICAgIHRoaXMucmVzZXREYXRhcyhpZCkNCiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7DQogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKQ0KICAgICAgfQ0KICAgIH0sDQogICAgZXhwYW5kQ2hhbmdlKHJvdykgew0KICAgICAgaWYgKCF0aGlzLnVwbG9hZEZpbGVzUHJldmlld1tyb3cuaWRdKSB0aGlzLiRzZXQodGhpcy51cGxvYWRGaWxlc1ByZXZpZXcsIHJvdy5pZCwgW10pDQogICAgICBpZiAoIXRoaXMudXBsb2FkUHJldmlld3Nbcm93LmlkXSkgdGhpcy4kc2V0KHRoaXMudXBsb2FkUHJldmlld3MsIHJvdy5pZCwgW10pDQogICAgICBpZiAoIXRoaXMucHJvZHVjdEZvcm1EYXRhW3Jvdy5pZF0pIHRoaXMuJHNldCh0aGlzLnByb2R1Y3RGb3JtRGF0YSwgcm93LmlkLCBuZXcgRm9ybURhdGEoKSkNCiAgICB9LA0KICAgIHNob3dVcGxvYWRQcmV2aWV3KHVybCkgew0KICAgICAgdGhpcy4kcmVmcy51cGxvYWRQcmV2aWV3SW1nLmZpbHRlcihpdGVtID0+IHsNCiAgICAgICAgaWYgKGl0ZW0uc3JjID09PSB1cmwpIGl0ZW0uc2hvd1ZpZXdlciA9IHRydWUNCiAgICAgIH0pDQogICAgfSwNCiAgICBkZWxldGVVcGxvYWRQcmV2aWV3KGlkLCB1aWQsIGlkeCkgew0KICAgICAgdGhpcy51cGxvYWRGaWxlc1ByZXZpZXdbaWRdLnNwbGljZShpZHgsIDEpDQogICAgICB0aGlzLnVwbG9hZFByZXZpZXdzW2lkXS5zcGxpY2UoaWR4LCAxKQ0KICAgICAgdGhpcy5wcm9kdWN0Rm9ybURhdGFbaWRdLmRlbGV0ZShpZCArIHVpZCkNCiAgICB9LA0KICAgIHJlc2V0RGF0YXMoaWQpIHsNCiAgICAgIHRoaXMudXBsb2FkRmlsZXNQcmV2aWV3W2lkXSA9IFtdDQogICAgICB0aGlzLnVwbG9hZFByZXZpZXdzW2lkXSA9IFtdDQogICAgICB0aGlzLnByb2R1Y3RGb3JtRGF0YVtpZF0gPSBuZXcgRm9ybURhdGEoKQ0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["Table.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Table.vue","sourceRoot":"src/components/main-content/component","sourcesContent":["<template>\r\n  <div class=\"table\">\r\n    <el-table :data=\"tableData\"\r\n              border\r\n              row-key=\"id\"\r\n              :tree-props=\"{children: 'child'}\"\r\n              :max-height=\"maxHeight\"\r\n              @expand-change=\"expandChange\"\r\n              stripe>\r\n      <el-table-column v-if=\"$route.name === '订单管理'\"\r\n                       type=\"expand\">\r\n        <template slot-scope=\"scope\">\r\n          <el-steps direction=\"vertical\"\r\n                    :space=\"70\">\r\n            <el-step v-for=\"item,idx in scope.row.positions\"\r\n                     :key=\"idx\"\r\n                     status=\"process\"\r\n                     icon=\"el-icon-delete-location\"\r\n                     :title=\"item.address\"\r\n                     :description=\"item.time\"></el-step>\r\n          </el-steps>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column v-if=\"$route.name === '商品列表'\"\r\n                       type=\"expand\">\r\n        <template slot-scope=\"scope\">\r\n          <div class=\"table-expand\">\r\n            <div class=\"expand-image\">\r\n              <p>商品图片：</p>\r\n              <div v-if=\"scope.row.productImages.length > 0\">\r\n                <vuescroll :ops=\"ops\">\r\n                  <div v-for=\"item,idx in scope.row.productImages\"\r\n                       :key=\"idx\"\r\n                       class=\"expand-image--img\">\r\n                    <el-image style=\"height: 120px\"\r\n                              ref=\"previewImg\"\r\n                              :src=\"item\"\r\n                              :preview-src-list=\"scope.row.productImages\">\r\n                    </el-image>\r\n                    <span class=\"expand-image--mask\">\r\n                      <span @click=\"showPreview(item)\"><i class=\"el-icon-zoom-in\"\r\n                           style=\"color:#fff\"></i></span>\r\n                      <span @click=\"handleImageDelete(item,scope.row)\"><i class=\"el-icon-delete\"\r\n                           style=\"color:#fff\"></i></span>\r\n                    </span>\r\n                  </div>\r\n                </vuescroll>\r\n              </div>\r\n              <div v-else>\r\n                <img src=\"../../../assets/images/no-image.webp\"\r\n                     alt=\"\">\r\n              </div>\r\n            </div>\r\n            <div class=\"expand-upload\">\r\n              <div class=\"expand-upload--head\">\r\n                <span>添加图片：</span>\r\n                <div>\r\n                  <el-button @click=\"resetDatas(scope.row.id)\"\r\n                             type=\"info\"\r\n                             size=\"mini\"\r\n                             round>清空已选文件</el-button>\r\n                  <el-button @click=\"handleImageUpload((scope.row.id))\"\r\n                             type=\"primary\"\r\n                             size=\"mini\"\r\n                             round>上传图片</el-button>\r\n                </div>\r\n              </div>\r\n              <div class=\"expand-upload--main\">\r\n                <el-upload ref=\"upload\"\r\n                           style=\"vertical-align: middle\"\r\n                           action=\"\"\r\n                           list-type=\"picture-card\"\r\n                           :show-file-list=\"false\"\r\n                           multiple\r\n                           :auto-upload=\"false\"\r\n                           :limit=10\r\n                           :on-change=\"(file)=>{handleUploadChange(file,scope.row.id)}\"\r\n                           :http-request=\"handleImageUpload\">\r\n                  <i slot=\"default\"\r\n                     class=\"el-icon-plus\"></i>\r\n                </el-upload>\r\n                <div class=\"expand-upload--preview\">\r\n                  <vuescroll :ops=\"ops\">\r\n                    <div v-for=\"(item,idx) in uploadFilesPreview[scope.row.id]\"\r\n                         :key=\"item.uid\"\r\n                         class=\"expand-image--img\">\r\n                      <el-image style=\"height: 120px\"\r\n                                ref=\"uploadPreviewImg\"\r\n                                :src=\"item.url\"\r\n                                :preview-src-list=\"uploadPreviews[scope.row.id]\">\r\n                      </el-image>\r\n                      <span class=\"expand-image--mask\">\r\n                        <span @click=\"showUploadPreview(item.url)\"><i class=\"el-icon-zoom-in\"\r\n                             style=\"color:#fff\"></i></span>\r\n                        <span @click=\"deleteUploadPreview(scope.row.id,item.uid,idx)\"><i class=\"el-icon-delete\"\r\n                             style=\"color:#fff\"></i></span>\r\n                      </span>\r\n                    </div>\r\n                  </vuescroll>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column v-for=\"item,idx in tableHeadData\"\r\n                       :key=\"idx\"\r\n                       :label=\"item.name\">\r\n        <template slot-scope=\"scope\">\r\n          <span v-if=\"item.type==='text'\">{{scope.row[item.field] || '/'}}</span>\r\n          <el-tag v-if=\"item.type==='tag'\"\r\n                  :type=\"scope.row.tagData.type\">{{scope.row.tagData.text}}</el-tag>\r\n          <el-switch v-if=\"item.type==='switch'\"\r\n                     :value=\"scope.row.status \"\r\n                     :active-value=\"1\"\r\n                     @change=\"handleChangeSwitch(scope.row,item.messageType,item.axiosType)\"\r\n                     active-color=\"#13ce66\"\r\n                     inactive-color=\"#ff4949\">\r\n          </el-switch>\r\n          <template v-if=\"item.type==='button'\">\r\n            <el-button v-for=\"curr,id in item.field\"\r\n                       :key=\"id\"\r\n                       :type=\"curr.type\"\r\n                       @click=\"hanldeClickButton(curr.axiosType,scope.row)\">\r\n              {{curr.text}}\r\n            </el-button>\r\n          </template>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport vuescroll from \"vuescroll\"\r\nimport MIXIN from '@/core/mixin'\r\nimport message from '@/plugins/message'\r\nimport TABLE_HEAD_DATA from '@/config/tableHead.config.js'\r\nimport MESSAGE_DATA from '@/config/message.config.js'\r\nimport { Message } from 'element-ui'\r\nexport default {\r\n  name: 'Table',\r\n  components: {\r\n    vuescroll\r\n  },\r\n  data() {\r\n    return {\r\n      tableHeadData: [],\r\n      transmitData: {},\r\n      productFormData: {},\r\n      dialogImageUrl: '',\r\n      dialogVisible: false,\r\n      ops: {\r\n        vuescroll: {\r\n          mode: 'native',\r\n          sizeStrategy: '120px',\r\n          detectResize: false,\r\n          /** 锁定一种滚动方向， 锁定的方向为水平或者垂直方向上滑动距离较大的那个方向 */\r\n          locking: false,\r\n        },\r\n        scrollPanel: {\r\n          initialScrollY: false,\r\n          initialScrollX: false,\r\n          scrollingX: true,\r\n          scrollingY: false,\r\n          speed: 300,\r\n          easing: undefined,\r\n          verticalNativeBarPos: 'right',\r\n          maxHeight: undefined,\r\n          maxWidth: undefined,\r\n        },\r\n        bar: {\r\n          showDelay: 500,\r\n          onlyShowBarOnScroll: false,\r\n          keepShow: false,\r\n          background: '#c1c1c1',\r\n          opacity: 1,\r\n          hoverStyle: false,\r\n          specifyBorderRadius: false,\r\n          minSize: false,\r\n          size: '6px',\r\n          disable: false,\r\n        }\r\n      },\r\n      uploadFilesPreview: {},\r\n      uploadPreviews: {}\r\n    }\r\n  },\r\n  mixins: [MIXIN],\r\n  props: {\r\n    tableData: {\r\n      type: Array\r\n    }\r\n  },\r\n  created() {\r\n    this.tableHeadData = TABLE_HEAD_DATA[this.$route.name]\r\n  },\r\n  computed: {\r\n    maxHeight() {\r\n      return (window.innerHeight - 310) + 'px'\r\n    },\r\n    expand() {\r\n      return TABLE_HEAD_DATA[this.$route.name]?.expand\r\n    }\r\n  },\r\n  methods: {\r\n    async handleChangeSwitch(row, messageType, type) {\r\n      let msgInfo = MESSAGE_DATA[messageType][Number(row.status)].message\r\n      message({\r\n        messageInfo: msgInfo, confirmCallback: async () => {\r\n          try {\r\n            row.status = row.status ? 0 : 1\r\n            await this.$axios(type, row)\r\n          } catch (error) {\r\n            row.status = row.status ? 0 : 1\r\n            console.log(error);\r\n          }\r\n        }\r\n      })\r\n    },\r\n    async hanldeClickButton(type, item) {\r\n      let _item = Object.assign({}, item)\r\n      if (type.includes('edit')) {\r\n        this.$bus.$emit('transmitFormData', _item)\r\n        this.openModal(type)\r\n      }\r\n      if (type.includes('delete')) {\r\n        message({\r\n          messageInfo: \"是否要删除此数据，删除后不可恢复\", confirmCallback: async () => {\r\n            try {\r\n              let result = await this.$axios(type, _item)\r\n              let data = type === \"deleteProductsCategory\" ? result.data.result : _item\r\n              this.$bus.$emit('changeData', data, type)\r\n              if (type === \"deleteProductsCategory\") {\r\n                this.$bus.$emit('formatSelectOptions')\r\n              }\r\n            } catch (error) {\r\n              console.log(error, \"table\")\r\n            }\r\n          }\r\n        })\r\n      }\r\n    },\r\n    showPreview(imageUrl) {\r\n      this.$refs.previewImg.map(item => {\r\n        if (item.src === imageUrl) item.showViewer = true\r\n      })\r\n    },\r\n    async handleImageDelete(deleteImageUrl, productData) {\r\n      message({\r\n        messageInfo: \"是否删除此图片，删除后不可恢复\", confirmCallback: async () => {\r\n          let data = { id: productData.id, deleteImageUrl }\r\n          let result = await this.$axios(\"editProduct\", data)\r\n          this.$bus.$emit('changeData', result.data.result)\r\n        }\r\n      })\r\n    },\r\n    handleUploadChange(file, id) {\r\n      let maxSize = 5 * 1024 * 1024\r\n      if (file.size > maxSize) {\r\n        Message({\r\n          type: \"warning\",\r\n          message: \"文件不得大于5M\"\r\n        })\r\n        return false\r\n      }\r\n      if (!(/image/g.test(file.raw.type))) {\r\n        Message({\r\n          type: \"warning\",\r\n          message: \"只能选择图片格式的文件\"\r\n        })\r\n        return false\r\n      }\r\n      this.uploadFilesPreview[id].push(file)\r\n      this.uploadPreviews[id].push(file.url)\r\n      this.productFormData[id].append(id + file.uid, file.raw)\r\n    },\r\n    async handleImageUpload(id) {\r\n      if (this.uploadFilesPreview[id].length === 0) {\r\n        Message({\r\n          type: \"warning\",\r\n          message: \"未选择图片\"\r\n        })\r\n        return false\r\n      }\r\n      this.productFormData[id].append(\"id\", id)\r\n      try {\r\n        let result = await this.$axios(\"addProduct\", this.productFormData[id])\r\n        this.$bus.$emit('changeData', result.data.result)\r\n        this.resetDatas(id)\r\n      } catch (error) {\r\n        console.log(error)\r\n      }\r\n    },\r\n    expandChange(row) {\r\n      if (!this.uploadFilesPreview[row.id]) this.$set(this.uploadFilesPreview, row.id, [])\r\n      if (!this.uploadPreviews[row.id]) this.$set(this.uploadPreviews, row.id, [])\r\n      if (!this.productFormData[row.id]) this.$set(this.productFormData, row.id, new FormData())\r\n    },\r\n    showUploadPreview(url) {\r\n      this.$refs.uploadPreviewImg.filter(item => {\r\n        if (item.src === url) item.showViewer = true\r\n      })\r\n    },\r\n    deleteUploadPreview(id, uid, idx) {\r\n      this.uploadFilesPreview[id].splice(idx, 1)\r\n      this.uploadPreviews[id].splice(idx, 1)\r\n      this.productFormData[id].delete(id + uid)\r\n    },\r\n    resetDatas(id) {\r\n      this.uploadFilesPreview[id] = []\r\n      this.uploadPreviews[id] = []\r\n      this.productFormData[id] = new FormData()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\">\r\n.table\r\n  width 100%\r\n  height 100%\r\n  margin 30px 0\r\n  .el-table .el-table__cell\r\n    padding 0\r\n  .el-table .el-table__expanded-cell\r\n    background-color #e6e7e9\r\n    .el-steps\r\n      padding-top 20px\r\n      .el-step\r\n        .el-step__icon\r\n          background-color #e6e7e9\r\n          .el-step__icon-inner\r\n            font-size: 16px\r\n        .el-step__title\r\n          font-weight normal\r\n        .el-step__description\r\n          color:#f5f5f5\r\n  .el-table .el-table__expanded-cell:hover\r\n    background-color #e6e7e9!important\r\n  .el-upload--picture-card\r\n    width 120px\r\n    height 120px\r\n    line-height 120px\r\n    margin-right 10px\r\n  .table-expand\r\n    display: flex\r\n    flex-direction: row\r\n    justify-content: space-between\r\n    align-items: center\r\n    padding-bottom: 10px\r\n    .expand-image\r\n      width 50%\r\n      padding-left: 10px\r\n      line-height 0\r\n      >div\r\n        width 100%\r\n        height 120px\r\n        margin-right 10px\r\n        border-radius: 6px\r\n        overflow: hidden\r\n        img\r\n          width 120px\r\n          height 120px\r\n          border-radius 6px\r\n    .expand-upload\r\n      width 50%\r\n      padding-left 10px\r\n      border-left 1px dotted #ccc\r\n      overflow: hidden\r\n      .expand-upload--head\r\n        display: flex\r\n        justify-content: space-between\r\n        align-items: center\r\n        >div\r\n          padding-right 50px\r\n      .expand-upload--main\r\n        display: flex\r\n        flex-direction: row\r\n        height 120px\r\n        .expand-upload--preview\r\n          display: flex\r\n          flex-direction: row\r\n          margin-right 10px\r\n          border-radius: 6px\r\n          overflow: hidden\r\n    .__view\r\n      display: flex\r\n      flex-direction: row\r\n      align-items: center\r\n      width 100%\r\n      height 100%\r\n      .expand-image--img\r\n        position: relative\r\n        height 120px\r\n        margin-right 10px\r\n        border-radius: 6px\r\n        overflow: hidden\r\n        flex-shrink: 0\r\n        .expand-image--mask\r\n          display: flex\r\n          justify-content: space-evenly\r\n          flex-direction: row\r\n          align-items: center\r\n          position: absolute\r\n          width auto\r\n          height 120px\r\n          top 0\r\n          left 0\r\n          right: 0\r\n          bottom: 0\r\n          background-color: rgba(0,0,0,.5)\r\n          scale: (0)\r\n          transition: .3s  all\r\n          span\r\n            cursor: pointer\r\n      .expand-image--img:hover .expand-image--mask\r\n        scale: (1)\r\n</style>\r\n"]}]}