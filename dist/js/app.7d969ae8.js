(function(e){function n(n){for(var a,r,c=n[0],d=n[1],s=n[2],i=0,l=[];i<c.length;i++)r=c[i],Object.prototype.hasOwnProperty.call(u,r)&&u[r]&&l.push(u[r][0]),u[r]=0;for(a in d)Object.prototype.hasOwnProperty.call(d,a)&&(e[a]=d[a]);f&&f(n);while(l.length)l.shift()();return o.push.apply(o,s||[]),t()}function t(){for(var e,n=0;n<o.length;n++){for(var t=o[n],a=!0,r=1;r<t.length;r++){var c=t[r];0!==u[c]&&(a=!1)}a&&(o.splice(n--,1),e=d(d.s=t[0]))}return e}var a={},r={app:0},u={app:0},o=[];function c(e){return d.p+"js/"+({}[e]||e)+"."+{"chunk-2d0b2c80":"1699081e","chunk-2d0f0f69":"a3e2b1a0","chunk-2d237117":"2ea710d3","chunk-4ab99114":"8f083fe6","chunk-5debca3b":"ac77af9c","chunk-6dbb24ab":"e9f4ff1e","chunk-41ffb642":"267f44d5","chunk-2d0aa5b5":"3a3a4cf4","chunk-2d0c78f5":"a5d53a75","chunk-2d20ef3a":"2ed40b39","chunk-2d210a58":"aa3df560","chunk-48f0eaae":"ccd70dcd","chunk-62e3766f":"3affe3e1","chunk-ace6b968":"057cdab8","chunk-969060d2":"17b91051"}[e]+".js"}function d(n){if(a[n])return a[n].exports;var t=a[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,d),t.l=!0,t.exports}d.e=function(e){var n=[],t={"chunk-4ab99114":1,"chunk-5debca3b":1,"chunk-6dbb24ab":1,"chunk-41ffb642":1,"chunk-ace6b968":1,"chunk-969060d2":1};r[e]?n.push(r[e]):0!==r[e]&&t[e]&&n.push(r[e]=new Promise((function(n,t){for(var a="css/"+({}[e]||e)+"."+{"chunk-2d0b2c80":"31d6cfe0","chunk-2d0f0f69":"31d6cfe0","chunk-2d237117":"31d6cfe0","chunk-4ab99114":"3d15af9a","chunk-5debca3b":"d2bd4f48","chunk-6dbb24ab":"4c9d25f4","chunk-41ffb642":"47bb4188","chunk-2d0aa5b5":"31d6cfe0","chunk-2d0c78f5":"31d6cfe0","chunk-2d20ef3a":"31d6cfe0","chunk-2d210a58":"31d6cfe0","chunk-48f0eaae":"31d6cfe0","chunk-62e3766f":"31d6cfe0","chunk-ace6b968":"ace16b7a","chunk-969060d2":"8b6bb5c0"}[e]+".css",u=d.p+a,o=document.getElementsByTagName("link"),c=0;c<o.length;c++){var s=o[c],i=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(i===a||i===u))return n()}var l=document.getElementsByTagName("style");for(c=0;c<l.length;c++){s=l[c],i=s.getAttribute("data-href");if(i===a||i===u)return n()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=n,f.onerror=function(n){var a=n&&n.target&&n.target.src||u,o=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=a,delete r[e],f.parentNode.removeChild(f),t(o)},f.href=u;var p=document.getElementsByTagName("head")[0];p.appendChild(f)})).then((function(){r[e]=0})));var a=u[e];if(0!==a)if(a)n.push(a[2]);else{var o=new Promise((function(n,t){a=u[e]=[n,t]}));n.push(a[2]=o);var s,i=document.createElement("script");i.charset="utf-8",i.timeout=120,d.nc&&i.setAttribute("nonce",d.nc),i.src=c(e);var l=new Error;s=function(n){i.onerror=i.onload=null,clearTimeout(f);var t=u[e];if(0!==t){if(t){var a=n&&("load"===n.type?"missing":n.type),r=n&&n.target&&n.target.src;l.message="Loading chunk "+e+" failed.\n("+a+": "+r+")",l.name="ChunkLoadError",l.type=a,l.request=r,t[1](l)}u[e]=void 0}};var f=setTimeout((function(){s({type:"timeout",target:i})}),12e4);i.onerror=i.onload=s,document.head.appendChild(i)}return Promise.all(n)},d.m=e,d.c=a,d.d=function(e,n,t){d.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},d.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},d.t=function(e,n){if(1&n&&(e=d(e)),8&n)return e;if(4&n&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(d.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var a in e)d.d(t,a,function(n){return e[n]}.bind(null,a));return t},d.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return d.d(n,"a",n),n},d.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},d.p="",d.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],i=s.push.bind(s);s.push=n,s=s.slice();for(var l=0;l<s.length;l++)n(s[l]);var f=i;o.push([0,"chunk-vendors"]),t()})({0:function(e,n,t){e.exports=t("56d7")},4360:function(e,n,t){"use strict";var a=t("c7eb"),r=t("1da1"),u=(t("d3b7"),t("2b0e")),o=t("2f62"),c={namespaced:!0,state:{isShow:!1,type:""},mutations:{CLOSE:function(e){e.isShow=!1},OPEN:function(e){e.isShow=!0},CHANGE_TYPE:function(e,n){e.type=n.type}},actions:{close:function(e){var n=e.commit;n("CLOSE")},open:function(e,n){var t=e.commit;t("CHANGE_TYPE",{type:n}),t("OPEN")}}},d=t("2909");t("159b"),t("4de4"),t("caad"),t("2532");function s(e,n){return e.filter((function(e){return!e.children&&n.includes(e.meta.id)?e:e.children?(e.children=s(e.children,n),e.children.length>0):void 0}))}var i,l=t("a18c"),f=t("8ded"),p=t.n(f),h={namespaced:!0,state:{permissionRoutes:[]},getters:{permissionRoutes:function(e){return e.permissionRoutes}},mutations:{SET_PERMISSION_ROUTES:function(e,n){e.permissionRoutes=n,p.a.set("background_manage_permissionRoutes",n)},DELETE_PERMISSION_ROUTES:function(e){e.permissionRoutes=[],p.a.remove("background_manage_permissionRoutes")}},actions:{comparisonAndSetUpRoutes:function(e,n){var t,a=e.commit,r=s(l["b"],n);(t=l["a"].options.routes[1].children).push.apply(t,Object(d["a"])(r)),r.forEach((function(e){l["a"].addRoute("layout",e)})),r.unshift(l["a"].options.routes[1].children[0]),a("SET_PERMISSION_ROUTES",r)}}},b=t("c1fb"),m=t("d2cf");u["default"].use(o["b"]);n["a"]=new o["b"].Store({state:{token:null===(i=p.a.get("background_manage_userInfo"))||void 0===i?void 0:i.token,userInfo:{}},getters:{userInfo:function(e){var n=p.a.get("background_manage_userInfo");if(e.token)return n||e.userInfo}},mutations:{SET_USERINFO:function(e,n){var t,a=n.userInfo;p.a.set("background_manage_userInfo",a),e.token=null===(t=p.a.get("background_manage_userInfo"))||void 0===t?void 0:t.token,e.userInfo=a},DELETE_INFO:function(e){e.token="",e.userInfo={},p.a.remove("background_manage_userInfo")}},actions:{logOut:function(e){var n=this;return Object(r["a"])(Object(a["a"])().mark((function t(){var r;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=e.commit,Object(m["a"])(),r("DELETE_INFO"),n.commit("permission/DELETE_PERMISSION_ROUTES");case 4:case"end":return t.stop()}}),t)})))()},login:function(e,n){var t=this;return Object(r["a"])(Object(a["a"])().mark((function r(){var u,o,c,d;return Object(a["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return u=e.commit,a.prev=1,a.next=4,Object(b["a"])("login",n);case 4:o=a.sent,c=o.data.result,d=c.roleAuth,u("SET_USERINFO",{userInfo:c}),t.dispatch("permission/comparisonAndSetUpRoutes",d),a.next=15;break;case 11:return a.prev=11,a.t0=a["catch"](1),console.log(a.t0),a.abrupt("return",Promise.reject(a.t0));case 15:case"end":return a.stop()}}),r,null,[[1,11]])})))()}},modules:{modal:c,permission:h}})},"56d7":function(e,n,t){"use strict";t.r(n);t("e260"),t("e6cf"),t("cca6"),t("a79d");var a=t("2b0e"),r=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},u=[],o={name:"app"},c=o,d=(t("7faf"),t("2877")),s=Object(d["a"])(c,r,u,!1,null,null,null),i=s.exports,l=t("a18c"),f=t("4360"),p=(t("6dca"),t("450d"),t("2cf9")),h=t.n(p),b=(t("06f1"),t("6ac9")),m=t.n(b),g=(t("acb6"),t("c673")),k=t.n(g),v=(t("f225"),t("89a9")),y=t.n(v),_=(t("9d4c"),t("e450")),O=t.n(_),E=(t("9c49"),t("6640")),w=t.n(E),P=(t("d2ac"),t("95b0")),S=t.n(P),j=(t("5e32"),t("6721")),I=t.n(j),R=(t("e960"),t("b35b")),x=t.n(R),T=(t("6611"),t("e772")),C=t.n(T),N=(t("1f1a"),t("4e4b")),A=t.n(N),U=(t("a7cc"),t("df33")),L=t.n(U),K=(t("cbb5"),t("8bbc")),M=t.n(K),F=(t("672e"),t("101e")),D=t.n(F),$=(t("28b2"),t("c7ad")),B=t.n($),q=(t("5466"),t("ecdf")),H=t.n(q),G=(t("38a0"),t("ad41")),J=t.n(G),Y=(t("920a"),t("4f0c")),z=t.n(Y),Q=(t("b84d"),t("c216")),V=t.n(Q),W=(t("8f24"),t("76b9")),X=t.n(W),Z=(t("f4f9"),t("c2cc")),ee=t.n(Z),ne=(t("7a0f"),t("0f6c")),te=t.n(ne),ae=(t("8bd8"),t("4cb2")),re=t.n(ae),ue=(t("34db"),t("3803")),oe=t.n(ue),ce=(t("ce18"),t("f58e")),de=t.n(ce),se=(t("4ca3"),t("443e")),ie=t.n(se),le=(t("10cb"),t("f3ad")),fe=t.n(le),pe=(t("eca7"),t("3787")),he=t.n(pe),be=(t("425f"),t("4105")),me=t.n(be),ge=(t("1951"),t("eedf")),ke=t.n(ge);a["default"].use(ke.a),a["default"].use(me.a),a["default"].use(he.a),a["default"].use(fe.a),a["default"].use(ie.a),a["default"].use(de.a),a["default"].use(oe.a),a["default"].use(re.a),a["default"].use(te.a),a["default"].use(ee.a),a["default"].use(X.a),a["default"].use(V.a),a["default"].use(z.a),a["default"].use(J.a),a["default"].use(H.a),a["default"].use(B.a),a["default"].use(D.a),a["default"].use(M.a),a["default"].use(L.a),a["default"].use(A.a),a["default"].use(C.a),a["default"].use(x.a),a["default"].use(I.a),a["default"].use(S.a),a["default"].use(w.a),a["default"].use(O.a),a["default"].use(y.a),a["default"].use(k.a),a["default"].use(m.a),a["default"].use(h.a);var ve=t("c1fb"),ye=(t("0fae"),t("a5d8"),t("98c9"));a["default"].use(ye["a"]),a["default"].config.productionTip=!1,a["default"].prototype.$axios=ve["a"],a["default"].prototype.$bus=new a["default"],new a["default"]({router:l["a"],store:f["a"],render:function(e){return e(i)}}).$mount("#app")},"7faf":function(e,n,t){"use strict";t("b8ff")},a18c:function(e,n,t){"use strict";t.d(n,"b",(function(){return s}));t("d3b7"),t("3ca3"),t("ddb0");var a=t("2b0e"),r=t("8c4f"),u=t("8ded"),o=t.n(u),c=t("4360");a["default"].use(r["a"]);var d=[{path:"/login",name:"login",component:function(){return t.e("chunk-5debca3b").then(t.bind(null,"4b3f"))}},{path:"/",name:"layout",redirect:"home",component:function(){return Promise.all([t.e("chunk-6dbb24ab"),t.e("chunk-ace6b968")]).then(t.bind(null,"5353"))},children:[{path:"home",name:"首页",component:function(){return t.e("chunk-969060d2").then(t.bind(null,"f5b8"))},meta:{icon:"el-icon-menu"}}]},{path:"*",name:"notFound",component:function(){return t.e("chunk-4ab99114").then(t.bind(null,"1644"))}}],s=[{path:"",name:"用户管理",component:function(){return t.e("chunk-2d0b2c80").then(t.bind(null,"2628"))},meta:{id:101,icon:"el-icon-user-solid"},children:[{path:"userslist",name:"用户列表",component:function(){return Promise.all([t.e("chunk-6dbb24ab"),t.e("chunk-41ffb642"),t.e("chunk-2d20ef3a")]).then(t.bind(null,"b20d"))},meta:{id:10101,icon:"el-icon-menu"}}]},{path:"",name:"权限管理",component:function(){return t.e("chunk-2d237117").then(t.bind(null,"fa17"))},meta:{id:102,icon:"el-icon-s-tools"},children:[{path:"rolelist",name:"角色列表",component:function(){return Promise.all([t.e("chunk-6dbb24ab"),t.e("chunk-41ffb642"),t.e("chunk-2d210a58")]).then(t.bind(null,"b97b"))},meta:{id:10201,icon:"el-icon-menu"}},{path:"permissiolist",name:"权限列表",component:function(){return Promise.all([t.e("chunk-6dbb24ab"),t.e("chunk-41ffb642"),t.e("chunk-48f0eaae")]).then(t.bind(null,"28ed"))},meta:{id:10202,icon:"el-icon-menu"}}]},{path:"",name:"商品管理",component:function(){return t.e("chunk-2d0f0f69").then(t.bind(null,"9f39"))},meta:{id:103,icon:"el-icon-s-goods"},children:[{path:"productslist",name:"商品列表",component:function(){return Promise.all([t.e("chunk-6dbb24ab"),t.e("chunk-41ffb642"),t.e("chunk-2d0aa5b5")]).then(t.bind(null,"1154"))},meta:{id:10301,icon:"el-icon-menu"}},{path:"productsclassify",name:"商品分类",component:function(){return Promise.all([t.e("chunk-6dbb24ab"),t.e("chunk-41ffb642"),t.e("chunk-2d0c78f5")]).then(t.bind(null,"50ae"))},meta:{id:10302,icon:"el-icon-menu"}}]},{path:"ordersmanage",name:"订单管理",component:function(){return Promise.all([t.e("chunk-6dbb24ab"),t.e("chunk-41ffb642"),t.e("chunk-62e3766f")]).then(t.bind(null,"bcc6"))},meta:{id:104,icon:"el-icon-s-order"}}],i=new r["a"]({routes:d});i.beforeEach((function(e,n,t){var a,r,u=null===(a=o.a.get("background_manage_userInfo"))||void 0===a?void 0:a.token,d=null===(r=o.a.get("background_manage_userInfo"))||void 0===r?void 0:r.roleAuth;u?"/login"===e.path?t("/"):0===c["a"].state.permission.permissionRoutes.length?(c["a"].dispatch("permission/comparisonAndSetUpRoutes",d),t({path:e.path})):t():("/login"!==e.path&&t("/login"),t())})),n["a"]=i},b8ff:function(e,n,t){},c1fb:function(e,n,t){"use strict";t.d(n,"a",(function(){return O}));var a=t("c7eb"),r=(t("0fb7"),t("450d"),t("f529")),u=t.n(r),o=t("1da1"),c=(t("d9e2"),t("d3b7"),t("caad"),t("4de4"),t("4fad"),t("bc3a")),d=t.n(c),s=t("8ded"),i=t.n(s),l=t("4360"),f=t("2b0e"),p=t("d2cf"),h=t("323e"),b=t.n(h),m=d.a.create({baseURL:"http://localhost:3300",timeout:"5000"});m.interceptors.request.use(function(){var e=Object(o["a"])(Object(a["a"])().mark((function e(n){var t,r,o,c,d,s;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(c=null===(t=i.a.get("background_manage_userInfo"))||void 0===t?void 0:t.token,d=null===(r=i.a.get("background_manage_userInfo"))||void 0===r?void 0:r.status,s=null===(o=i.a.get("background_manage_userInfo"))||void 0===o?void 0:o.roleName,c&&(n.headers["Authorization"]="Bearer ".concat(c)),!["delete","put","post"].includes(n.method)||0!==d||"超级管理员"===s){e.next=7;break}return u()({type:"warning",message:"当前用户已被禁用，无法进行操作"}),e.abrupt("return",Promise.reject("当前用户已被禁用，无法进行操作"));case 7:return b.a.start(),e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),(function(e){return Promise.reject(e)})),m.interceptors.response.use((function(e){if(["user","role"].includes(e.config.url)&&"put"===e.config.method){var n=i.a.get("background_manage_userInfo"),t=e.data.data.result;if(n.id===t.id||n.role===t.id){var a=["username","status","roleName","roleAuth"];if(Object.entries(t).filter((function(e){a.includes(e[0])&&n[e[0]]!==e[1]&&(n[e[0]]=e[1])})),l["a"].commit("SET_USERINFO",{userInfo:n}),"role"===e.config.url){Object(p["a"])();var r=i.a.get("background_manage_userInfo"),u=r.roleAuth;l["a"].dispatch("permission/comparisonAndSetUpRoutes",u)}else f["default"].prototype.$bus.$emit("headerCmponentUpdate")}}return b.a.done(),null===e||void 0===e?void 0:e.data}),(function(e){return Promise.reject(e)}));var g=m,k={login:{url:"login",method:"post",rsaKey:"password"},getPubKey:{url:"getPubKey",method:"get"},getUserList:{url:"user",method:"get"},addUser:{url:"user",method:"post",rsaKey:"password"},editUser:{url:"user",method:"put",rsaKey:"password"},deleteUser:{url:"user",method:"delete"},getRoleList:{url:"role",method:"get"},addRole:{url:"role",method:"post"},editRole:{url:"role",method:"put"},deleteRole:{url:"role",method:"delete"},addProductsCategory:{url:"productsCategory",method:"post"},getProductsCategory:{url:"productsCategory",method:"get"},editProductsCategory:{url:"productsCategory",method:"put"},deleteProductsCategory:{url:"productsCategory",method:"delete"},addProduct:{url:"product",method:"post"},getProductList:{url:"product",method:"get"},editProduct:{url:"product",method:"put"},deleteProduct:{url:"product",method:"delete"}},v=(t("ac1f"),t("5319"),t("9816"));function y(e){return _.apply(this,arguments)}function _(){return _=Object(o["a"])(Object(a["a"])().mark((function e(n){var t,r,u;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=i.a.get("background_manage_publicKey"),e.prev=1,t&&"undefined"!==t){e.next=10;break}return e.next=5,g.get("/getPubKey");case 5:r=e.sent,t=r.data.pubKey,t=t.replace(/\. +/g,""),t=t.replace(/[\r\n]/g,""),i.a.set("background_manage_publicKey",t);case 10:return u=new v["a"],u.setPublicKey(t),e.abrupt("return",u.encrypt(n));case 15:e.prev=15,e.t0=e["catch"](1),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[1,15]])}))),_.apply(this,arguments)}function O(e,n){return E.apply(this,arguments)}function E(){return E=Object(o["a"])(Object(a["a"])().mark((function e(n,t){var r,o,c,d,s,i,l;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n in k){e.next=2;break}throw new Error("API请求错误");case 2:if(r=k[n],o=r.url,c=r.method,d=r.rsaKey,s=void 0===d?"":d,e.prev=3,!s||!t[s]){e.next=8;break}return e.next=7,y(t[s]);case 7:t[s]=e.sent;case 8:return t="get"===c?{params:t}:"delete"===c?{data:t}:t,e.next=11,g[c](o,t);case 11:return i=e.sent,u()({message:null===i||void 0===i?void 0:i.message,type:"success"}),e.abrupt("return",i);case 16:return e.prev=16,e.t0=e["catch"](3),e.t0.response&&(l=e.t0.response.data.message,u.a.error(l)),e.abrupt("return",Promise.reject(e.t0));case 20:case"end":return e.stop()}}),e,null,[[3,16]])}))),E.apply(this,arguments)}},d2cf:function(e,n,t){"use strict";t.d(n,"a",(function(){return u}));t("a434");var a=t("a18c"),r=t("8c4f");function u(){var e=a["a"].options.routes;e[1].children.splice(1,e[1].children.length-1),a["a"].matcher=new r["a"]({routes:e}).matcher}}});
//# sourceMappingURL=app.7d969ae8.js.map