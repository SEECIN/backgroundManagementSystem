{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\电商管理\\background-manage-system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\电商管理\\background-manage-system\\src\\components\\main-content\\component\\Table.vue?vue&type=style&index=0&id=21353982&lang=stylus&scoped=true&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\电商管理\\background-manage-system\\src\\components\\main-content\\component\\Table.vue","mtime":1666361600926},{"path":"C:\\Users\\Administrator\\Desktop\\电商管理\\background-manage-system\\node_modules\\css-loader\\dist\\cjs.js","mtime":1654578879614},{"path":"C:\\Users\\Administrator\\Desktop\\电商管理\\background-manage-system\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1654578885082},{"path":"C:\\Users\\Administrator\\Desktop\\电商管理\\background-manage-system\\node_modules\\postcss-loader\\src\\index.js","mtime":1654578881377},{"path":"C:\\Users\\Administrator\\Desktop\\电商管理\\background-manage-system\\node_modules\\stylus-loader\\index.js","mtime":1654667144069},{"path":"C:\\Users\\Administrator\\Desktop\\电商管理\\background-manage-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1654578877485},{"path":"C:\\Users\\Administrator\\Desktop\\电商管理\\background-manage-system\\node_modules\\vue-loader\\lib\\index.js","mtime":1654578883487}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLnRhYmxlDQogIHdpZHRoIDEwMCUNCiAgaGVpZ2h0IDEwMCUNCiAgbWFyZ2luIDMwcHggMA0KICAuZWwtdGFibGUgPj4+LmVsLXRhYmxlX19jZWxsDQogICAgcGFkZGluZy10b3AgNHB4DQogIC5lbC10YWJsZSA+Pj4uZWwtdGFibGVfX2V4cGFuZGVkLWNlbGwNCiAgICBiYWNrZ3JvdW5kLWNvbG9yICNlNmU3ZTkNCiAgLmVsLXRhYmxlID4+Pi5lbC10YWJsZV9fZXhwYW5kZWQtY2VsbDpob3Zlcg0KICAgIGJhY2tncm91bmQtY29sb3IgI2U2ZTdlOSFpbXBvcnRhbnQNCiAgPj4+LmVsLXVwbG9hZC0tcGljdHVyZS1jYXJkDQogICAgd2lkdGggMTIwcHgNCiAgICBoZWlnaHQgMTIwcHgNCiAgICBsaW5lLWhlaWdodCAxMjBweA0KICAuZWwtdGFibGUgPj4+LmVsLXRhYmxlX19leHBhbmRlZC1jZWxsIC50YWJsZS1leHBhbmQNCiAgICBkaXNwbGF5OiBmbGV4DQogICAgZmxleC1kaXJlY3Rpb246IHJvdw0KICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2Vlbg0KICAgIGFsaWduLWl0ZW1zOiBjZW50ZXINCiAgICAuZXhwYW5kLXVwbG9hZA0KICAgICAgd2lkdGggNTAlDQogICAgICBwYWRkaW5nLWxlZnQgMTBweA0KICAgICAgYm9yZGVyLWxlZnQgMXB4IGRvdHRlZCAjY2NjDQogICAgICAuZXhwYW5kLXVwbG9hZC0taGVhZA0KICAgICAgICBkaXNwbGF5OiBmbGV4DQogICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2Vlbg0KICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyDQogICAgICAgID5kaXYNCiAgICAgICAgICBwYWRkaW5nLXJpZ2h0IDUwcHgNCiAgICAuZXhwYW5kLWltYWdlDQogICAgICB3aWR0aCA1MCUNCiAgICAgIHBhZGRpbmctbGVmdDogMTBweA0KICAgICAgbGluZS1oZWlnaHQgMA0KICAgICAgPmRpdg0KICAgICAgICBkaXNwbGF5OiBmbGV4DQogICAgICAgIGZsZXgtZGlyZWN0aW9uOiByb3cNCiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcg0KICAgICAgICB3aWR0aCAxMDAlDQogICAgICAgIG92ZXJmbG93LXg6IGF1dG8NCiAgICAgICAgLmV4cGFuZC1pbWFnZS0taW1nDQogICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlDQogICAgICAgICAgbWFyZ2luLXJpZ2h0IDEwcHgNCiAgICAgICAgICBmbGV4LXNocmluazogMA0KICAgICAgICAgIC5leHBhbmQtaW1hZ2UtLW1hc2sNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXgNCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtZXZlbmx5DQogICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogcm93DQogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyDQogICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGUNCiAgICAgICAgICAgIHdpZHRoIGF1dG8NCiAgICAgICAgICAgIGhlaWdodCAxMjBweA0KICAgICAgICAgICAgdG9wIDANCiAgICAgICAgICAgIGxlZnQgMA0KICAgICAgICAgICAgcmlnaHQ6IDANCiAgICAgICAgICAgIGJvdHRvbTogMA0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLDAsMCwuNSkNCiAgICAgICAgICAgIHNjYWxlOiAoMCkNCiAgICAgICAgICAgIHRyYW5zaXRpb246IC4zcyAgYWxsDQogICAgICAgICAgICBzcGFuDQogICAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcg0KICAgICAgICAuZXhwYW5kLWltYWdlLS1pbWc6aG92ZXIgLmV4cGFuZC1pbWFnZS0tbWFzaw0KICAgICAgICAgIHNjYWxlOiAoMSkNCi5lbC10YWJsZV9fY2VsbCA+Pj4uZWwtdXBsb2FkLWxpc3QtLXBpY3R1cmUtY2FyZCA+Pj4uZWwtdXBsb2FkLWxpc3RfX2l0ZW0NCiAgd2lkdGggYXV0byFpbXBvcnRhbnQNCiAgaGVpZ2h0IDEyMHB4IWltcG9ydGFudA0K"},{"version":3,"sources":["Table.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Table.vue","sourceRoot":"src/components/main-content/component","sourcesContent":["<template>\r\n  <div class=\"table\">\r\n    <el-table :data=\"tableData\"\r\n              border\r\n              row-key=\"id\"\r\n              :tree-props=\"{children: 'child'}\"\r\n              :max-height=\"maxHeight\"\r\n              stripe>\r\n      <el-table-column v-if=\"$route.name === '订单管理'\"\r\n                       type=\"expand\">\r\n        <template slot-scope=\"scope\">\r\n          <el-steps direction=\"vertical\"\r\n                    :space=\"70\">\r\n            <el-step v-for=\"item,idx in scope.row.positions\"\r\n                     :key=\"idx\"\r\n                     status=\"process\"\r\n                     icon=\"el-icon-delete-location\"\r\n                     :title=\"item.address\"\r\n                     :description=\"item.time\"></el-step>\r\n          </el-steps>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column v-if=\"$route.name === '商品列表'\"\r\n                       type=\"expand\">\r\n        <template slot-scope=\"scope\">\r\n          <div class=\"table-expand\">\r\n            <div class=\"expand-image\">\r\n              <p>商品图片：</p>\r\n              <div>\r\n                <div v-for=\"item,idx in scope.row.productImages\"\r\n                     :key=\"idx\"\r\n                     class=\"expand-image--img\">\r\n                  <el-image style=\"height: 120px\"\r\n                            ref=\"previewImg\"\r\n                            :src=\"item\"\r\n                            :preview-src-list=\"scope.row.productImages\">\r\n                  </el-image>\r\n                  <span class=\"expand-image--mask\">\r\n                    <span @click=\"showPreview(item)\"><i class=\"el-icon-zoom-in\"\r\n                         style=\"color:#fff\"></i></span>\r\n                    <span @click=\"handleImageDelete(item,scope.row)\"><i class=\"el-icon-delete\"\r\n                         style=\"color:#fff\"></i></span>\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"expand-upload\">\r\n              <div class=\"expand-upload--head\">\r\n                <span>添加图片：</span>\r\n                <div>\r\n                  <el-button type=\"info\"\r\n                             size=\"mini\"\r\n                             round>清空已选文件</el-button>\r\n                  <el-button type=\"primary\"\r\n                             size=\"mini\"\r\n                             round>上传图片</el-button>\r\n                </div>\r\n              </div>\r\n              <el-upload ref=\"upload\"\r\n                         style=\"vertical-align: middle\"\r\n                         action=\"api/product\"\r\n                         list-type=\"picture-card\"\r\n                         multiple\r\n                         :auto-upload=\"false\"\r\n                         :limit=10\r\n                         :data=\"{id:scope.row.id}\"\r\n                         :on-change=\"handleUploadChange\"\r\n                         :http-request=\"handleImageUpload\">\r\n                <i slot=\"default\"\r\n                   class=\"el-icon-plus\"></i>\r\n                <div slot=\"file\"\r\n                     style=\"height:120px;width:auto\"\r\n                     slot-scope=\"{file}\">\r\n                  <img class=\"el-upload-list__item-thumbnail\"\r\n                       style=\"height:120px;width:auto\"\r\n                       :src=\"file.url\"\r\n                       alt=\"\">\r\n                  <span class=\"el-upload-list__item-actions\">\r\n                    <span class=\"el-upload-list__item-preview\"\r\n                          @click=\"handlePictureCardPreview(file)\">\r\n                      <i class=\"el-icon-zoom-in\"></i>\r\n                    </span>\r\n                    <span class=\"el-upload-list__item-delete\"\r\n                          @click=\"handleRemove(file)\">\r\n                      <i class=\"el-icon-delete\"></i>\r\n                    </span>\r\n                  </span>\r\n                </div>\r\n              </el-upload>\r\n            </div>\r\n          </div>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column v-for=\"item,idx in tableHeadData\"\r\n                       :key=\"idx\"\r\n                       :label=\"item.name\">\r\n        <template slot-scope=\"scope\">\r\n          <span v-if=\"item.type==='text'\">{{scope.row[item.field] || '/'}}</span>\r\n          <el-tag v-if=\"item.type==='tag'\"\r\n                  :type=\"scope.row.tagData.type\">{{scope.row.tagData.text}}</el-tag>\r\n          <el-switch v-if=\"item.type==='switch'\"\r\n                     :value=\"scope.row.status \"\r\n                     :active-value=\"1\"\r\n                     @change=\"handleChangeSwitch(scope.row,item.messageType,item.axiosType)\"\r\n                     active-color=\"#13ce66\"\r\n                     inactive-color=\"#ff4949\">\r\n          </el-switch>\r\n          <template v-if=\"item.type==='button'\">\r\n            <el-button v-for=\"curr,id in item.field\"\r\n                       :key=\"id\"\r\n                       :type=\"curr.type\"\r\n                       @click=\"hanldeClickButton(curr.axiosType,scope.row)\">\r\n              {{curr.text}}\r\n            </el-button>\r\n          </template>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport MIXIN from '@/core/mixin'\r\nimport message from '@/plugins/message'\r\nimport TABLE_HEAD_DATA from '@/config/tableHead.config.js'\r\nimport MESSAGE_DATA from '@/config/message.config.js'\r\nimport { Message } from 'element-ui'\r\nexport default {\r\n  name: 'Table',\r\n  data() {\r\n    return {\r\n      tableHeadData: [],\r\n      transmitData: {},\r\n      productFormData: new FormData()\r\n    }\r\n  },\r\n  mixins: [MIXIN],\r\n  props: {\r\n    tableData: {\r\n      type: Array\r\n    }\r\n  },\r\n  created() {\r\n    this.tableHeadData = TABLE_HEAD_DATA[this.$route.name]\r\n  },\r\n  computed: {\r\n    maxHeight() {\r\n      return (window.innerHeight - 310) + 'px'\r\n    },\r\n    expand() {\r\n      return TABLE_HEAD_DATA[this.$route.name]?.expand\r\n    }\r\n  },\r\n  methods: {\r\n    async handleChangeSwitch(row, messageType, type) {\r\n      let msgInfo = MESSAGE_DATA[messageType][Number(row.status)].message\r\n      message({\r\n        messageInfo: msgInfo, confirmCallback: async () => {\r\n          try {\r\n            row.status = row.status ? 0 : 1\r\n            await this.$axios(type, row)\r\n          } catch (error) {\r\n            row.status = row.status ? 0 : 1\r\n            console.log(error);\r\n          }\r\n        }\r\n      })\r\n    },\r\n    async hanldeClickButton(type, item) {\r\n      let _item = Object.assign({}, item)\r\n      if (type.includes('edit')) {\r\n        this.$bus.$emit('transmitFormData', _item)\r\n        this.openModal(type)\r\n      }\r\n      if (type.includes('delete')) {\r\n        message({\r\n          messageInfo: \"是否要删除此数据，删除后不可恢复\", confirmCallback: async () => {\r\n            try {\r\n              let result = await this.$axios(type, _item)\r\n              let data = type === \"deleteProductsCategory\" ? result.data.result : _item\r\n              this.$bus.$emit('changeData', data, type)\r\n              if (type === \"deleteProductsCategory\") {\r\n                this.$bus.$emit('formatSelectOptions')\r\n              }\r\n            } catch (error) {\r\n              console.log(error, \"table\")\r\n            }\r\n          }\r\n        })\r\n      }\r\n    },\r\n    async handleImageDelete(deleteImageUrl, productData) {\r\n      message({\r\n        messageInfo: \"是否删除此图片，删除后不可恢复\", confirmCallback: async () => {\r\n          let data = { id: productData.id, deleteImageUrl }\r\n          let result = await this.$axios(\"editProduct\", data)\r\n          this.$bus.$emit('changeData', result.data.result)\r\n        }\r\n      })\r\n    },\r\n    handleUploadChange(file) {\r\n      let maxSize = 5 * 1024 * 1024\r\n      if (file.size > maxSize) {\r\n        Message({\r\n          type: \"warning\",\r\n          message: \"文件不得大于5M\"\r\n        })\r\n        return false\r\n      }\r\n      if (!(/image/g.test(file.raw.type))) {\r\n        Message({\r\n          type: \"warning\",\r\n          message: \"只能选择图片格式的文件\"\r\n        })\r\n        return false\r\n      }\r\n      this.productFormData.append(\"file\", file.raw)\r\n      // this.$refs[\"upload\"].handleRemove()\r\n      console.log(this.$refs[\"upload\"])\r\n      // this.handleImageUpload()\r\n    },\r\n    async handleImageUpload() {\r\n      this.productFormData.append(\"id\", this.$refs[\"upload\"].data.id)\r\n      try {\r\n        let result = await this.$axios(\"addProduct\", this.productFormData)\r\n        this.$refs[\"upload\"].clearFiles()\r\n        this.$bus.$emit('changeData', result.data.result)\r\n        this.productFormData = new FormData()\r\n      } catch (error) {\r\n        console.log(error)\r\n      }\r\n    },\r\n    showPreview(imageUrl) {\r\n      this.$refs.previewImg.map(item => {\r\n        if (item.src === imageUrl) item.showViewer = true\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n.table\r\n  width 100%\r\n  height 100%\r\n  margin 30px 0\r\n  .el-table >>>.el-table__cell\r\n    padding-top 4px\r\n  .el-table >>>.el-table__expanded-cell\r\n    background-color #e6e7e9\r\n  .el-table >>>.el-table__expanded-cell:hover\r\n    background-color #e6e7e9!important\r\n  >>>.el-upload--picture-card\r\n    width 120px\r\n    height 120px\r\n    line-height 120px\r\n  .el-table >>>.el-table__expanded-cell .table-expand\r\n    display: flex\r\n    flex-direction: row\r\n    justify-content: space-between\r\n    align-items: center\r\n    .expand-upload\r\n      width 50%\r\n      padding-left 10px\r\n      border-left 1px dotted #ccc\r\n      .expand-upload--head\r\n        display: flex\r\n        justify-content: space-between\r\n        align-items: center\r\n        >div\r\n          padding-right 50px\r\n    .expand-image\r\n      width 50%\r\n      padding-left: 10px\r\n      line-height 0\r\n      >div\r\n        display: flex\r\n        flex-direction: row\r\n        align-items: center\r\n        width 100%\r\n        overflow-x: auto\r\n        .expand-image--img\r\n          position: relative\r\n          margin-right 10px\r\n          flex-shrink: 0\r\n          .expand-image--mask\r\n            display: flex\r\n            justify-content: space-evenly\r\n            flex-direction: row\r\n            align-items: center\r\n            position: absolute\r\n            width auto\r\n            height 120px\r\n            top 0\r\n            left 0\r\n            right: 0\r\n            bottom: 0\r\n            background-color: rgba(0,0,0,.5)\r\n            scale: (0)\r\n            transition: .3s  all\r\n            span\r\n              cursor: pointer\r\n        .expand-image--img:hover .expand-image--mask\r\n          scale: (1)\r\n.el-table__cell >>>.el-upload-list--picture-card >>>.el-upload-list__item\r\n  width auto!important\r\n  height 120px!important\r\n</style>\r\n"]}]}