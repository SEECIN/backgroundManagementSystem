{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\电商管理\\background-manage-system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\电商管理\\background-manage-system\\src\\components\\base\\BaseModal.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\电商管理\\background-manage-system\\src\\components\\base\\BaseModal.vue","mtime":1666342730345},{"path":"C:\\Users\\Administrator\\Desktop\\电商管理\\background-manage-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1654578877485},{"path":"C:\\Users\\Administrator\\Desktop\\电商管理\\background-manage-system\\node_modules\\babel-loader\\lib\\index.js","mtime":1654578881393},{"path":"C:\\Users\\Administrator\\Desktop\\电商管理\\background-manage-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1654578877485},{"path":"C:\\Users\\Administrator\\Desktop\\电商管理\\background-manage-system\\node_modules\\vue-loader\\lib\\index.js","mtime":1654578883487}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgc3RvcmUgZnJvbSAic3RvcmUiDQppbXBvcnQgTU9EQUxfRk9STV9EQVRBIGZyb20gJ0AvY29uZmlnL21vZGFsRm9ybS5jb25maWcnDQppbXBvcnQgVkFMSURBVEVfREFUQSBmcm9tICdAL2NvbmZpZy92YWxpZGF0ZS5jb25maWcnDQppbXBvcnQgQmFzZUZvcm0gZnJvbSAiY29tcG9uZW50cy9iYXNlL0Jhc2VGb3JtIg0KaW1wb3J0IHsgZHluYW1pY1JvdXRlcyB9IGZyb20gIkAvcm91dGVyL2luZGV4Ig0KaW1wb3J0IHsgY3JlYXRlTmFtZXNwYWNlZEhlbHBlcnMgfSBmcm9tICd2dWV4Jw0KY29uc3QgeyBtYXBTdGF0ZSwgbWFwQWN0aW9ucyB9ID0gY3JlYXRlTmFtZXNwYWNlZEhlbHBlcnMoJ21vZGFsJykNCmltcG9ydCB7IE1lc3NhZ2UgfSBmcm9tICdlbGVtZW50LXVpJw0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAnQmFzZU1vZGFsJywNCiAgY29tcG9uZW50czogew0KICAgIEJhc2VGb3JtDQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGZvcm06IHt9LA0KICAgICAgc2VsZWN0T3B0aW9uczoge30sDQogICAgICBjYXRlZ29yeUxpc3Q6IFtdLA0KICAgICAgZmlyc3RDYXRlZ29yeTogW10sDQogICAgICBzZWNvbmRDYXRlZ29yeTogW10sDQogICAgICB0aGlyZENhdGVnb3J5OiBbXSwNCiAgICAgIHJvbGVMaXN0OiBbXSwNCiAgICAgIGF4aW9zUmVzdWx0OiB7fSwNCiAgICAgIHByb2R1Y3RGb3JtRGF0YTogbmV3IEZvcm1EYXRhKCkNCiAgICB9DQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgdGhpcy4kYnVzLiRvbigndHJhbnNtaXRGb3JtRGF0YScsIGRhdGEgPT4gew0KICAgICAgdGhpcy5mb3JtID0gZGF0YQ0KICAgIH0pDQogICAgdGhpcy4kYnVzLiRvbignZm9ybWF0U2VsZWN0T3B0aW9ucycsIGRhdGEgPT4gew0KICAgICAgdGhpcy5mb3JtYXRTZWxlY3RPcHRpb25zKGRhdGEgfHwgdGhpcy5jYXRlZ29yeUxpc3QpDQogICAgfSkNCiAgfSwNCiAgd2F0Y2g6IHsNCiAgICBhc3luYyB0eXBlKHR5cGUpIHsNCiAgICAgIGlmICh0eXBlLmluY2x1ZGVzKCdVc2VyJykpIHsNCiAgICAgICAgbGV0IHJlc3VsdCA9IGF3YWl0IHRoaXMuJGF4aW9zKCdnZXRSb2xlTGlzdCcpDQogICAgICAgIHRoaXMucm9sZUxpc3QgPSByZXN1bHQuZGF0YS5yb2xlTGlzdA0KICAgICAgfQ0KICAgICAgaWYgKFsnYWRkUHJvZHVjdCcsICdlZGl0UHJvZHVjdCddLmluY2x1ZGVzKHR5cGUpKSB7DQogICAgICAgIGxldCByZXN1bHQgPSBhd2FpdCB0aGlzLiRheGlvcygnZ2V0UHJvZHVjdHNDYXRlZ29yeScpDQogICAgICAgIHRoaXMuY2F0ZWdvcnlMaXN0ID0gcmVzdWx0LmRhdGEucmVzdWx0DQogICAgICB9DQogICAgfSwNCiAgICBpc1Nob3codmFsKSB7DQogICAgICBpZiAoIXZhbCkgew0KICAgICAgICB0aGlzLiRidXMuJG9uKCdmb3JtYXRTZWxlY3RPcHRpb25zJywgZGF0YSA9PiB7DQogICAgICAgICAgdGhpcy5mb3JtYXRTZWxlY3RPcHRpb25zKGRhdGEgfHwgdGhpcy5jYXRlZ29yeUxpc3QpDQogICAgICAgIH0pDQogICAgICAgIGxldCB0cmVlDQogICAgICAgIGlmICh0aGlzLnR5cGUuaW5jbHVkZXMoJ1JvbGUnKSkgew0KICAgICAgICAgIHRyZWUgPSB0aGlzLiRyZWZzWydmb3JtJ10uJHJlZnNbJ3RyZWUnXVswXQ0KICAgICAgICAgIHRyZWUuc2V0Q2hlY2tlZEtleXMoW10pDQogICAgICAgIH0NCiAgICAgICAgdGhpcy5mb3JtID0ge30NCiAgICAgICAgdGhpcy4kYnVzLiRvbigndHJhbnNtaXRGb3JtRGF0YScsIGRhdGEgPT4gew0KICAgICAgICAgIHRoaXMuZm9ybSA9IGRhdGENCiAgICAgICAgICBpZiAodHJlZSkgdHJlZS5zZXRDaGVja2VkS2V5cyhkYXRhLnJvbGVBdXRoKQ0KICAgICAgICB9KQ0KICAgICAgICB0aGlzLnByb2R1Y3RGb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpDQogICAgICAgIGlmICh0aGlzLnR5cGUuaW5jbHVkZXMoImFkZFByb2R1Y3QiKSkgdGhpcy4kcmVmc1siZm9ybSJdLiRyZWZzWyJ1cGxvYWQiXVswXS51cGxvYWRGaWxlcyA9IFtdDQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLiRidXMuJG9mZigndHJhbnNtaXRGb3JtRGF0YScpDQogICAgICAgIHRoaXMuJGJ1cy4kb2ZmKCdmb3JtYXRTZWxlY3RPcHRpb25zJykNCiAgICAgIH0NCiAgICB9LA0KICAgIGZvcm06IHsNCiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uKG5ld1ZhbCkgew0KICAgICAgICBpZiAodGhpcy4kcm91dGUucGF0aCA9PT0gIi9wcm9kdWN0c2NsYXNzaWZ5Iikgew0KICAgICAgICAgIGxldCBleGlzdEZpcnN0Q2F0ZWdvcnkgPSB0aGlzLmZpcnN0Q2F0ZWdvcnkuZmlsdGVyKGl0ZW0gPT4gaXRlbS5jYXRlZ29yeU5hbWUgPT09IHRoaXMuZm9ybS5maXJzdENhdGVnb3J5KQ0KICAgICAgICAgIGlmIChleGlzdEZpcnN0Q2F0ZWdvcnkubGVuZ3RoID09PSAwKSB7DQogICAgICAgICAgICB0aGlzLnNlY29uZENhdGVnb3J5ID0gW10NCiAgICAgICAgICAgIHRoaXMudGhpcmRDYXRlZ29yeSA9IFtdDQogICAgICAgICAgfQ0KICAgICAgICAgIHRoaXMuY2F0ZWdvcnlMaXN0LmZpbHRlcihpdGVtID0+IHsNCiAgICAgICAgICAgIGlmIChuZXdWYWwuZmlyc3RDYXRlZ29yeSA9PT0gaXRlbS5jYXRlZ29yeU5hbWUpIHsNCiAgICAgICAgICAgICAgdGhpcy5zZWNvbmRDYXRlZ29yeSA9IGl0ZW0uY2hpbGQucmVkdWNlKChhY2MsIGN1cnIpID0+IHsNCiAgICAgICAgICAgICAgICBhY2MucHVzaCh7DQogICAgICAgICAgICAgICAgICBjYXRlZ29yeU5hbWU6IGN1cnIuY2F0ZWdvcnlOYW1lLA0KICAgICAgICAgICAgICAgICAgaWQ6IGN1cnI/LmlkLA0KICAgICAgICAgICAgICAgICAgcm9vdE5hbWU6IGN1cnI/LnJvb3ROYW1lDQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICByZXR1cm4gYWNjDQogICAgICAgICAgICAgIH0sIFtdKQ0KICAgICAgICAgICAgICBpZiAobmV3VmFsLnNlY29uZENhdGVnb3J5KSB7DQogICAgICAgICAgICAgICAgaXRlbS5jaGlsZC5maWx0ZXIoY2hpbGRyZW4gPT4gew0KICAgICAgICAgICAgICAgICAgaWYgKG5ld1ZhbC5zZWNvbmRDYXRlZ29yeSA9PT0gY2hpbGRyZW4uY2F0ZWdvcnlOYW1lKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMudGhpcmRDYXRlZ29yeSA9IGNoaWxkcmVuLmNoaWxkLnJlZHVjZSgoYWNjLCBjdXJyKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgYWNjLnB1c2goew0KICAgICAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnlOYW1lOiBjdXJyLmNhdGVnb3J5TmFtZSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBjdXJyPy5pZCwNCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudE5hbWU6IGN1cnI/LnBhcmVudE5hbWUNCiAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhY2MNCiAgICAgICAgICAgICAgICAgICAgfSwgW10pDQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pDQogICAgICAgICAgdGhpcy5zZWxlY3RPcHRpb25zID0geyBmaXJzdENhdGVnb3J5OiB0aGlzLmZpcnN0Q2F0ZWdvcnksIHNlY29uZENhdGVnb3J5OiB0aGlzLnNlY29uZENhdGVnb3J5LCB0aGlyZENhdGVnb3J5OiB0aGlzLnRoaXJkQ2F0ZWdvcnkgfQ0KICAgICAgICB9DQogICAgICB9LA0KICAgICAgZGVlcDogdHJ1ZQ0KICAgIH0sDQogICAgc2Vjb25kQ2F0ZWdvcnkobmV3VmFsLCBvbGRWYWwpIHsNCiAgICAgIGlmIChuZXdWYWxbMF0/LnJvb3ROYW1lICE9PSBvbGRWYWxbMF0/LnJvb3ROYW1lICYmIHRoaXMuZm9ybS5zZWNvbmRDYXRlZ29yeSkgew0KICAgICAgICB0aGlzLmZvcm0uc2Vjb25kQ2F0ZWdvcnkgPSAiIg0KICAgICAgICBpZiAodGhpcy5mb3JtLnRoaXJkQ2F0ZWdvcnkpIHRoaXMuZm9ybS50aGlyZENhdGVnb3J5ID0gIiINCiAgICAgIH0NCiAgICAgIGxldCBleGlzdEZpcnN0Q2F0ZWdvcnkgPSB0aGlzLmZpcnN0Q2F0ZWdvcnkuZmlsdGVyKGl0ZW0gPT4gaXRlbS5jYXRlZ29yeU5hbWUgPT09IHRoaXMuZm9ybS5maXJzdENhdGVnb3J5KQ0KICAgICAgbGV0IGV4aXN0U2Vjb25kQ2F0ZW9yeSA9IG9sZFZhbC5maWx0ZXIoaXRlbSA9PiBpdGVtLmNhdGVnb3J5TmFtZSA9PT0gdGhpcy5mb3JtLnNlY29uZENhdGVnb3J5KQ0KICAgICAgaWYgKGV4aXN0Rmlyc3RDYXRlZ29yeS5sZW5ndGggPiAwICYmIGV4aXN0U2Vjb25kQ2F0ZW9yeS5sZW5ndGggPT09IDAgJiYgdGhpcy5mb3JtLnNlY29uZENhdGVnb3J5KSB0aGlzLnRoaXJkQ2F0ZWdvcnkgPSBbXQ0KICAgIH0sDQogICAgdGhpcmRDYXRlZ29yeShuZXdWYWwsIG9sZFZhbCkgew0KICAgICAgaWYgKG5ld1ZhbFswXT8ucGFyZW50TmFtZSAhPT0gb2xkVmFsWzBdPy5wYXJlbnROYW1lICYmIHRoaXMuZm9ybS50aGlyZENhdGVnb3J5KSB0aGlzLmZvcm0udGhpcmRDYXRlZ29yeSA9ICIiDQogICAgfQ0KICB9LA0KICBjb21wdXRlZDogew0KICAgIC4uLm1hcFN0YXRlKFsnaXNTaG93JywgJ3R5cGUnXSksDQogICAgdGl0bGUoKSB7DQogICAgICByZXR1cm4gTU9EQUxfRk9STV9EQVRBW3RoaXMudHlwZV0/LnRpdGxlDQogICAgfSwNCiAgICB0cmVlRGF0YSgpIHsNCiAgICAgIHJldHVybiB0aGlzLmZvcm1hdFRyZWVEYXRhKGR5bmFtaWNSb3V0ZXMpDQogICAgfSwNCiAgICBydWxlcygpIHsNCiAgICAgIHJldHVybiBWQUxJREFURV9EQVRBDQogICAgfSwNCiAgICBtb2RhbEZvcm1EYXRhKCkgew0KICAgICAgcmV0dXJuIE1PREFMX0ZPUk1fREFUQVt0aGlzLnR5cGVdPy5jaGlsZHJlbg0KICAgIH0sDQogICAgdG9rZW4oKSB7DQogICAgICByZXR1cm4gc3RvcmUuZ2V0KHByb2Nlc3MuZW52LlZVRV9BUFBfVVNFUl9JTkZPKT8udG9rZW4NCiAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBzdWJtaXQoKSB7DQogICAgICBpZiAodGhpcy50eXBlLmluY2x1ZGVzKCdSb2xlJykpIHsNCiAgICAgICAgY29uc3QgdHJlZSA9IHRoaXMuJHJlZnNbJ2Zvcm0nXS4kcmVmc1sndHJlZSddWzBdDQogICAgICAgIGxldCBjaGVja2VkS2V5cyA9IHRyZWUuZ2V0Q2hlY2tlZEtleXMoKQ0KICAgICAgICB0aGlzLiRyZWZzWydmb3JtJ10uZm9ybS5yb2xlQXV0aCA9IGNoZWNrZWRLZXlzDQogICAgICB9DQogICAgICB0aGlzLiRyZWZzWydmb3JtJ10uJHJlZnNbJ3ZhbGlkYXRlRm9ybSddLnZhbGlkYXRlKGFzeW5jIHZhbGlkID0+IHsNCiAgICAgICAgaWYgKHZhbGlkKSB7DQogICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIGlmIChbImFkZFByb2R1Y3QiXS5pbmNsdWRlcyh0aGlzLnR5cGUpKSB7DQogICAgICAgICAgICAgIGF3YWl0IHRoaXMuaGFuZGxlVXBsb2FkUmVxdWVzdCgpDQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICB0aGlzLmF4aW9zUmVzdWx0ID0gYXdhaXQgdGhpcy4kYXhpb3ModGhpcy50eXBlLCB0aGlzLiRyZWZzWydmb3JtJ10uZm9ybSkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICghdGhpcy5heGlvc1Jlc3VsdCkgcmV0dXJuIGZhbHNlDQogICAgICAgICAgICB0aGlzLiRidXMuJGVtaXQoJ2NoYW5nZURhdGEnLCB0aGlzLmF4aW9zUmVzdWx0LmRhdGEucmVzdWx0KQ0KICAgICAgICAgICAgdGhpcy4kYnVzLiRlbWl0KCd0cmFuc21pdEZvcm1EYXRhJywgdGhpcy5heGlvc1Jlc3VsdC5kYXRhLnJlc3VsdCkNCiAgICAgICAgICAgIGlmICh0aGlzLnR5cGUgPT09ICJhZGRQcm9kdWN0c0NhdGVnb3J5IikgdGhpcy5mb3JtYXRTZWxlY3RPcHRpb25zKHRoaXMuY2F0ZWdvcnlMaXN0KQ0KICAgICAgICAgICAgdGhpcy5jbG9zZSgpDQogICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKQ0KICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICByZXR1cm4gZmFsc2UNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KICAgIGZvcm1hdFNlbGVjdE9wdGlvbnMoZGF0YSkgew0KICAgICAgdGhpcy5jYXRlZ29yeUxpc3QgPSBkYXRhDQogICAgICB0aGlzLmZpcnN0Q2F0ZWdvcnkgPSBkYXRhLnJlZHVjZSgoYWNjLCBjdXJyKSA9PiB7DQogICAgICAgIGFjYy5wdXNoKHsNCiAgICAgICAgICBjYXRlZ29yeU5hbWU6IGN1cnIuY2F0ZWdvcnlOYW1lLA0KICAgICAgICAgIGlkOiBjdXJyPy5pZA0KICAgICAgICB9KQ0KICAgICAgICByZXR1cm4gYWNjDQogICAgICB9LCBbXSkNCiAgICAgIHRoaXMuc2VsZWN0T3B0aW9ucyA9IHsgZmlyc3RDYXRlZ29yeTogdGhpcy5maXJzdENhdGVnb3J5LCBzZWNvbmRDYXRlZ29yeTogdGhpcy5zZWNvbmRDYXRlZ29yeSwgdGhpcmRDYXRlZ29yeTogdGhpcy50aGlyZENhdGVnb3J5IH0NCiAgICB9LA0KICAgIGZvcm1hdFRyZWVEYXRhKGRhdGFzKSB7DQogICAgICByZXR1cm4gZGF0YXMubWFwKGl0ZW0gPT4gew0KICAgICAgICBpZiAoIWl0ZW0uY2hpbGRyZW4pIHsNCiAgICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgaWQ6IGl0ZW0ubWV0YS5pZCwNCiAgICAgICAgICAgIG5hbWU6IGl0ZW0ubmFtZQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBpZiAoaXRlbS5jaGlsZHJlbikgew0KICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICBpZDogaXRlbS5tZXRhLmlkLA0KICAgICAgICAgICAgbmFtZTogaXRlbS5uYW1lLA0KICAgICAgICAgICAgY2hpbGRyZW46IHRoaXMuZm9ybWF0VHJlZURhdGEoaXRlbS5jaGlsZHJlbikNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfSwNCiAgICBoYW5kbGVVcGxvYWRDaGFuZ2UoZmlsZSkgew0KICAgICAgbGV0IG1heFNpemUgPSA1ICogMTAyNCAqIDEwMjQNCiAgICAgIGlmIChmaWxlLnNpemUgPiBtYXhTaXplKSB7DQogICAgICAgIE1lc3NhZ2Uoew0KICAgICAgICAgIHR5cGU6ICJ3YXJuaW5nIiwNCiAgICAgICAgICBtZXNzYWdlOiAi5paH5Lu25LiN5b6X5aSn5LqONU0iDQogICAgICAgIH0pDQogICAgICAgIHRoaXMuJHJlZnNbImZvcm0iXS4kcmVmc1sidXBsb2FkIl1bMF0uaGFuZGxlUmVtb3ZlKGZpbGUpDQogICAgICAgIHJldHVybiBmYWxzZQ0KICAgICAgfQ0KICAgICAgaWYgKCEoL2ltYWdlL2cudGVzdChmaWxlLnJhdy50eXBlKSkpIHsNCiAgICAgICAgTWVzc2FnZSh7DQogICAgICAgICAgdHlwZTogIndhcm5pbmciLA0KICAgICAgICAgIG1lc3NhZ2U6ICLlj6rog73pgInmi6nlm77niYfmoLzlvI/nmoTmlofku7YiDQogICAgICAgIH0pDQogICAgICAgIHRoaXMuJHJlZnNbImZvcm0iXS4kcmVmc1sidXBsb2FkIl1bMF0uaGFuZGxlUmVtb3ZlKGZpbGUpDQogICAgICAgIHJldHVybiBmYWxzZQ0KICAgICAgfQ0KICAgICAgdGhpcy5wcm9kdWN0Rm9ybURhdGEuYXBwZW5kKCJmaWxlIiwgZmlsZS5yYXcpDQogICAgfSwNCiAgICBhc3luYyBoYW5kbGVVcGxvYWRSZXF1ZXN0KCkgew0KICAgICAgZm9yIChjb25zdCBrZXkgaW4gdGhpcy4kcmVmc1snZm9ybSddLmZvcm0pIHsNCiAgICAgICAgdGhpcy5wcm9kdWN0Rm9ybURhdGEuYXBwZW5kKGtleSwgdGhpcy4kcmVmc1snZm9ybSddLmZvcm1ba2V5XSkNCiAgICAgIH0NCiAgICAgIHRoaXMuYXhpb3NSZXN1bHQgPSBhd2FpdCB0aGlzLiRheGlvcyh0aGlzLnR5cGUsIHRoaXMucHJvZHVjdEZvcm1EYXRhKQ0KICAgIH0sDQogICAgY2xvc2VNb2RhbCgpIHsNCiAgICAgIHRoaXMuJGJ1cy4kZW1pdCgiaW5pdFRhYmxlRGF0YSIpDQogICAgICB0aGlzLmNsb3NlKCkNCiAgICB9LA0KICAgIC4uLm1hcEFjdGlvbnMoWydjbG9zZSddKQ0KICB9LA0KICBiZWZvcmVEZXN0cm95KCkgew0KDQogIH0NCn0NCg=="},{"version":3,"sources":["BaseModal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"BaseModal.vue","sourceRoot":"src/components/base","sourcesContent":["<template>\r\n  <div>\r\n    <el-dialog class=\"dialogModal\"\r\n               :title=\"title\"\r\n               :show-close=\"false\"\r\n               :visible=\"isShow\">\r\n      <BaseForm :type=\"type\"\r\n                :form='form'\r\n                :treeData=\"treeData\"\r\n                :roleList=\"roleList\"\r\n                :rules=\"rules\"\r\n                :token=\"token\"\r\n                :modalFormData=\"modalFormData\"\r\n                :categoryList=\"categoryList\"\r\n                :selectOptions='selectOptions'\r\n                :handleUploadChange=\"handleUploadChange\"\r\n                :handleUploadRequest=\"handleUploadRequest\"\r\n                ref=\"form\" />\r\n      <div slot=\"footer\"\r\n           class=\"dialog-footer\">\r\n        <el-button @click=\"closeModal\">取 消</el-button>\r\n        <el-button type=\"primary\"\r\n                   @click=\"submit\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport store from \"store\"\r\nimport MODAL_FORM_DATA from '@/config/modalForm.config'\r\nimport VALIDATE_DATA from '@/config/validate.config'\r\nimport BaseForm from \"components/base/BaseForm\"\r\nimport { dynamicRoutes } from \"@/router/index\"\r\nimport { createNamespacedHelpers } from 'vuex'\r\nconst { mapState, mapActions } = createNamespacedHelpers('modal')\r\nimport { Message } from 'element-ui'\r\nexport default {\r\n  name: 'BaseModal',\r\n  components: {\r\n    BaseForm\r\n  },\r\n  data() {\r\n    return {\r\n      form: {},\r\n      selectOptions: {},\r\n      categoryList: [],\r\n      firstCategory: [],\r\n      secondCategory: [],\r\n      thirdCategory: [],\r\n      roleList: [],\r\n      axiosResult: {},\r\n      productFormData: new FormData()\r\n    }\r\n  },\r\n  created() {\r\n    this.$bus.$on('transmitFormData', data => {\r\n      this.form = data\r\n    })\r\n    this.$bus.$on('formatSelectOptions', data => {\r\n      this.formatSelectOptions(data || this.categoryList)\r\n    })\r\n  },\r\n  watch: {\r\n    async type(type) {\r\n      if (type.includes('User')) {\r\n        let result = await this.$axios('getRoleList')\r\n        this.roleList = result.data.roleList\r\n      }\r\n      if (['addProduct', 'editProduct'].includes(type)) {\r\n        let result = await this.$axios('getProductsCategory')\r\n        this.categoryList = result.data.result\r\n      }\r\n    },\r\n    isShow(val) {\r\n      if (!val) {\r\n        this.$bus.$on('formatSelectOptions', data => {\r\n          this.formatSelectOptions(data || this.categoryList)\r\n        })\r\n        let tree\r\n        if (this.type.includes('Role')) {\r\n          tree = this.$refs['form'].$refs['tree'][0]\r\n          tree.setCheckedKeys([])\r\n        }\r\n        this.form = {}\r\n        this.$bus.$on('transmitFormData', data => {\r\n          this.form = data\r\n          if (tree) tree.setCheckedKeys(data.roleAuth)\r\n        })\r\n        this.productFormData = new FormData()\r\n        if (this.type.includes(\"addProduct\")) this.$refs[\"form\"].$refs[\"upload\"][0].uploadFiles = []\r\n      } else {\r\n        this.$bus.$off('transmitFormData')\r\n        this.$bus.$off('formatSelectOptions')\r\n      }\r\n    },\r\n    form: {\r\n      handler: function(newVal) {\r\n        if (this.$route.path === \"/productsclassify\") {\r\n          let existFirstCategory = this.firstCategory.filter(item => item.categoryName === this.form.firstCategory)\r\n          if (existFirstCategory.length === 0) {\r\n            this.secondCategory = []\r\n            this.thirdCategory = []\r\n          }\r\n          this.categoryList.filter(item => {\r\n            if (newVal.firstCategory === item.categoryName) {\r\n              this.secondCategory = item.child.reduce((acc, curr) => {\r\n                acc.push({\r\n                  categoryName: curr.categoryName,\r\n                  id: curr?.id,\r\n                  rootName: curr?.rootName\r\n                })\r\n                return acc\r\n              }, [])\r\n              if (newVal.secondCategory) {\r\n                item.child.filter(children => {\r\n                  if (newVal.secondCategory === children.categoryName) {\r\n                    this.thirdCategory = children.child.reduce((acc, curr) => {\r\n                      acc.push({\r\n                        categoryName: curr.categoryName,\r\n                        id: curr?.id,\r\n                        parentName: curr?.parentName\r\n                      })\r\n                      return acc\r\n                    }, [])\r\n                  }\r\n                })\r\n              }\r\n            }\r\n          })\r\n          this.selectOptions = { firstCategory: this.firstCategory, secondCategory: this.secondCategory, thirdCategory: this.thirdCategory }\r\n        }\r\n      },\r\n      deep: true\r\n    },\r\n    secondCategory(newVal, oldVal) {\r\n      if (newVal[0]?.rootName !== oldVal[0]?.rootName && this.form.secondCategory) {\r\n        this.form.secondCategory = \"\"\r\n        if (this.form.thirdCategory) this.form.thirdCategory = \"\"\r\n      }\r\n      let existFirstCategory = this.firstCategory.filter(item => item.categoryName === this.form.firstCategory)\r\n      let existSecondCateory = oldVal.filter(item => item.categoryName === this.form.secondCategory)\r\n      if (existFirstCategory.length > 0 && existSecondCateory.length === 0 && this.form.secondCategory) this.thirdCategory = []\r\n    },\r\n    thirdCategory(newVal, oldVal) {\r\n      if (newVal[0]?.parentName !== oldVal[0]?.parentName && this.form.thirdCategory) this.form.thirdCategory = \"\"\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState(['isShow', 'type']),\r\n    title() {\r\n      return MODAL_FORM_DATA[this.type]?.title\r\n    },\r\n    treeData() {\r\n      return this.formatTreeData(dynamicRoutes)\r\n    },\r\n    rules() {\r\n      return VALIDATE_DATA\r\n    },\r\n    modalFormData() {\r\n      return MODAL_FORM_DATA[this.type]?.children\r\n    },\r\n    token() {\r\n      return store.get(process.env.VUE_APP_USER_INFO)?.token\r\n    }\r\n  },\r\n  methods: {\r\n    submit() {\r\n      if (this.type.includes('Role')) {\r\n        const tree = this.$refs['form'].$refs['tree'][0]\r\n        let checkedKeys = tree.getCheckedKeys()\r\n        this.$refs['form'].form.roleAuth = checkedKeys\r\n      }\r\n      this.$refs['form'].$refs['validateForm'].validate(async valid => {\r\n        if (valid) {\r\n          try {\r\n            if ([\"addProduct\"].includes(this.type)) {\r\n              await this.handleUploadRequest()\r\n            } else {\r\n              this.axiosResult = await this.$axios(this.type, this.$refs['form'].form)\r\n            }\r\n            if (!this.axiosResult) return false\r\n            this.$bus.$emit('changeData', this.axiosResult.data.result)\r\n            this.$bus.$emit('transmitFormData', this.axiosResult.data.result)\r\n            if (this.type === \"addProductsCategory\") this.formatSelectOptions(this.categoryList)\r\n            this.close()\r\n          } catch (error) {\r\n            console.log(error)\r\n          }\r\n        } else {\r\n          return false\r\n        }\r\n      })\r\n    },\r\n    formatSelectOptions(data) {\r\n      this.categoryList = data\r\n      this.firstCategory = data.reduce((acc, curr) => {\r\n        acc.push({\r\n          categoryName: curr.categoryName,\r\n          id: curr?.id\r\n        })\r\n        return acc\r\n      }, [])\r\n      this.selectOptions = { firstCategory: this.firstCategory, secondCategory: this.secondCategory, thirdCategory: this.thirdCategory }\r\n    },\r\n    formatTreeData(datas) {\r\n      return datas.map(item => {\r\n        if (!item.children) {\r\n          return {\r\n            id: item.meta.id,\r\n            name: item.name\r\n          }\r\n        }\r\n        if (item.children) {\r\n          return {\r\n            id: item.meta.id,\r\n            name: item.name,\r\n            children: this.formatTreeData(item.children)\r\n          }\r\n        }\r\n      })\r\n    },\r\n    handleUploadChange(file) {\r\n      let maxSize = 5 * 1024 * 1024\r\n      if (file.size > maxSize) {\r\n        Message({\r\n          type: \"warning\",\r\n          message: \"文件不得大于5M\"\r\n        })\r\n        this.$refs[\"form\"].$refs[\"upload\"][0].handleRemove(file)\r\n        return false\r\n      }\r\n      if (!(/image/g.test(file.raw.type))) {\r\n        Message({\r\n          type: \"warning\",\r\n          message: \"只能选择图片格式的文件\"\r\n        })\r\n        this.$refs[\"form\"].$refs[\"upload\"][0].handleRemove(file)\r\n        return false\r\n      }\r\n      this.productFormData.append(\"file\", file.raw)\r\n    },\r\n    async handleUploadRequest() {\r\n      for (const key in this.$refs['form'].form) {\r\n        this.productFormData.append(key, this.$refs['form'].form[key])\r\n      }\r\n      this.axiosResult = await this.$axios(this.type, this.productFormData)\r\n    },\r\n    closeModal() {\r\n      this.$bus.$emit(\"initTableData\")\r\n      this.close()\r\n    },\r\n    ...mapActions(['close'])\r\n  },\r\n  beforeDestroy() {\r\n\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\">\r\n.dialogModal .el-dialog \r\n  max-height 70vh\r\n  overflow-y: auto\r\n  .el-dialog__header\r\n    text-align center\r\n</style>\r\n"]}]}