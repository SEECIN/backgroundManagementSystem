{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\电商管理\\background-manage-system\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\电商管理\\background-manage-system\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\Administrator\\Desktop\\电商管理\\background-manage-system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\电商管理\\background-manage-system\\src\\components\\base\\BaseForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\电商管理\\background-manage-system\\src\\components\\base\\BaseForm.vue","mtime":1662215221546},{"path":"C:\\Users\\Administrator\\Desktop\\电商管理\\background-manage-system\\babel.config.js","mtime":1654661870493},{"path":"C:\\Users\\Administrator\\Desktop\\电商管理\\background-manage-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1654578877485},{"path":"C:\\Users\\Administrator\\Desktop\\电商管理\\background-manage-system\\node_modules\\babel-loader\\lib\\index.js","mtime":1654578881393},{"path":"C:\\Users\\Administrator\\Desktop\\电商管理\\background-manage-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1654578877485},{"path":"C:\\Users\\Administrator\\Desktop\\电商管理\\background-manage-system\\node_modules\\vue-loader\\lib\\index.js","mtime":1654578883487}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiQzovVXNlcnMvQWRtaW5pc3RyYXRvci9EZXNrdG9wL1x1NzUzNVx1NTU0Nlx1N0JBMVx1NzQwNi9iYWNrZ3JvdW5kLW1hbmFnZS1zeXN0ZW0vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3JlZ2VuZXJhdG9yUnVudGltZS5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJDOi9Vc2Vycy9BZG1pbmlzdHJhdG9yL0Rlc2t0b3AvXHU3NTM1XHU1NTQ2XHU3QkExXHU3NDA2L2JhY2tncm91bmQtbWFuYWdlLXN5c3RlbS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBNT0RBTF9GT1JNX0RBVEEgZnJvbSAnQC9jb25maWcvbW9kYWxGb3JtLmNvbmZpZyc7CmltcG9ydCBWQUxJREFURV9EQVRBIGZyb20gJ0AvY29uZmlnL3ZhbGlkYXRlLmNvbmZpZyc7CmltcG9ydCBkeW5hbWljUm91dGVzIGZyb20gIkAvcm91dGVyL2R5bmFtaWNSb3V0ZXMuanMiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0Jhc2VGb3JtJywKICBjb21wb25lbnRzOiB7fSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZGVmYXVsdFByb3BzOiB7CiAgICAgICAgY2hpbGRyZW46ICdjaGlsZHJlbicsCiAgICAgICAgbGFibGU6ICduYW1lJwogICAgICB9LAogICAgICByb2xlTGlzdDogW10sCiAgICAgIGNoZWNrZWRLZXlzOiBbXQogICAgfTsKICB9LAogIHByb3BzOiB7CiAgICB0eXBlOiB7CiAgICAgIHR5cGU6IFN0cmluZwogICAgfSwKICAgIGZvcm06IHsKICAgICAgdHlwZTogT2JqZWN0CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgdHlwZTogZnVuY3Rpb24gdHlwZShfdHlwZSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpZiAoX3R5cGUuaW5jbHVkZXMoJ1VzZXInKSkgX3RoaXMuZ2V0Um9sZUxpc3QoKTsKCiAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGZvcm1EYXRhOiBmdW5jdGlvbiBmb3JtRGF0YSgpIHsKICAgICAgdmFyIF9NT0RBTF9GT1JNX0RBVEEkdGhpczsKCiAgICAgIHJldHVybiAoX01PREFMX0ZPUk1fREFUQSR0aGlzID0gTU9EQUxfRk9STV9EQVRBW3RoaXMudHlwZV0pID09PSBudWxsIHx8IF9NT0RBTF9GT1JNX0RBVEEkdGhpcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX01PREFMX0ZPUk1fREFUQSR0aGlzLmNoaWxkcmVuOwogICAgfSwKICAgIHJ1bGVzOiBmdW5jdGlvbiBydWxlcygpIHsKICAgICAgcmV0dXJuIFZBTElEQVRFX0RBVEE7CiAgICB9LAogICAgdHJlZURhdGE6IGZ1bmN0aW9uIHRyZWVEYXRhKCkgewogICAgICByZXR1cm4gdGhpcy5mb3JtYXRUcmVlRGF0YShkeW5hbWljUm91dGVzKTsKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBpZiAoX3RoaXMyLnR5cGUuaW5jbHVkZXMoJ1VzZXInKSkgX3RoaXMyLmdldFJvbGVMaXN0KCk7CgogICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMik7CiAgICB9KSkoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGZvcm1hdFRyZWVEYXRhOiBmdW5jdGlvbiBmb3JtYXRUcmVlRGF0YShkYXRhcykgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHJldHVybiBkYXRhcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICBpZiAoIWl0ZW0uY2hpbGRyZW4pIHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGlkOiBpdGVtLm1ldGEuaWQsCiAgICAgICAgICAgIG5hbWU6IGl0ZW0ubmFtZQogICAgICAgICAgfTsKICAgICAgICB9CgogICAgICAgIGlmIChpdGVtLmNoaWxkcmVuKSB7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBpZDogaXRlbS5tZXRhLmlkLAogICAgICAgICAgICBuYW1lOiBpdGVtLm5hbWUsCiAgICAgICAgICAgIGNoaWxkcmVuOiBfdGhpczMuZm9ybWF0VHJlZURhdGEoaXRlbS5jaGlsZHJlbikKICAgICAgICAgIH07CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBnZXRSb2xlTGlzdDogZnVuY3Rpb24gZ2V0Um9sZUxpc3QoKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgdmFyIHJlc3VsdDsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzNC4kYXhpb3MoJ2dldFJvbGVMaXN0Jyk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9jb250ZXh0My5zZW50OwogICAgICAgICAgICAgICAgX3RoaXM0LnJvbGVMaXN0ID0gcmVzdWx0LmRhdGEucm9sZUxpc3Q7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMyk7CiAgICAgIH0pKSgpOwogICAgfQogIH0KfTs="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4CA;AACA;AACA;AACA;EACAA,gBADA;EAEAC,cAFA;EAKAC,IALA,kBAKA;IACA;MACAC;QACAC,oBADA;QAEAC;MAFA,CADA;MAKAC,YALA;MAMAC;IANA;EAQA,CAdA;EAeAC;IACAC;MACAA;IADA,CADA;IAIAC;MACAD;IADA;EAJA,CAfA;EAuBAE;IACAF,IADA,gBACAA,KADA,EACA;MAAA;;MAAA;QAAA;UAAA;YAAA;cAAA;gBACA;;cADA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;EAHA,CAvBA;EA4BAG;IACAC,QADA,sBACA;MAAA;;MACA;IACA,CAHA;IAIAC,KAJA,mBAIA;MACA;IACA,CANA;IAOAC,QAPA,sBAOA;MACA;IACA;EATA,CA5BA;EAuCAC,OAvCA,qBAuCA;IAAA;;IAAA;MAAA;QAAA;UAAA;YAAA;cACA;;YADA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;EAEA,CAzCA;EA0CAC;IACAC,cADA,0BACAC,KADA,EACA;MAAA;;MACA;QACA;UACA;YACAC,gBADA;YAEApB;UAFA;QAIA;;QACA;UACA;YACAoB,gBADA;YAEApB,eAFA;YAGAI;UAHA;QAKA;MACA,CAdA;IAeA,CAjBA;IAkBAiB,WAlBA,yBAkBA;MAAA;;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACA,4BADA;;cAAA;gBACAC,MADA;gBAEA;;cAFA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAGA;EArBA;AA1CA","names":["name","components","data","defaultProps","children","lable","roleList","checkedKeys","props","type","form","watch","computed","formData","rules","treeData","mounted","methods","formatTreeData","datas","id","getRoleList","result"],"sourceRoot":"src/components/base","sources":["BaseForm.vue"],"sourcesContent":["<template>\r\n  <div class=\"\">\r\n    <el-form :model=\"form\"\r\n             :rules=\"rules\"\r\n             ref=\"validateForm\">\r\n      <el-form-item v-for=\"item in formData\"\r\n                    :key=\"item.query\"\r\n                    :prop=\"item['query']\"\r\n                    :label=\"item.label\"\r\n                    label-width=\"100px\">\r\n        <template v-if=\"['text','email'].includes(item.type)\">\r\n          <el-input v-model=\"form[item['query']]\"\r\n                    :show-password=\"item['query'] === 'password'\"\r\n                    :placeholder=\"item.placeholder\"></el-input>\r\n        </template>\r\n        <template v-if=\"item.type==='select'\">\r\n          <el-select v-model=\"form[item['query']]\"\r\n                     :placeholder=\"item.placeholder\">\r\n            <el-option v-for=\"item in roleList\"\r\n                       :key=\"item.id\"\r\n                       :label=\"item.roleName\"\r\n                       :value=\"item.id\"></el-option>\r\n          </el-select>\r\n        </template>\r\n        <template v-if=\"item.type==='tree'\">\r\n          <el-tree :data=\"treeData\"\r\n                   :props=\"defaultProps\"\r\n                   ref=\"tree\"\r\n                   show-checkbox\r\n                   node-key=\"id\"\r\n                   :default-checked-keys=\"form.roleAuth\"\r\n                   highlight-current>\r\n            <span class=\"custom-tree-node\"\r\n                  slot-scope=\"{data}\">\r\n              <span>{{data.name }}</span>\r\n            </span>\r\n          </el-tree>\r\n        </template>\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport MODAL_FORM_DATA from '@/config/modalForm.config'\r\nimport VALIDATE_DATA from '@/config/validate.config'\r\nimport dynamicRoutes from \"@/router/dynamicRoutes.js\"\r\nexport default {\r\n  name: 'BaseForm',\r\n  components: {\r\n\r\n  },\r\n  data() {\r\n    return {\r\n      defaultProps: {\r\n        children: 'children',\r\n        lable: 'name'\r\n      },\r\n      roleList: [],\r\n      checkedKeys: []\r\n    }\r\n  },\r\n  props: {\r\n    type: {\r\n      type: String\r\n    },\r\n    form: {\r\n      type: Object\r\n    }\r\n  },\r\n  watch: {\r\n    async type(type) {\r\n      if (type.includes('User')) this.getRoleList()\r\n    }\r\n  },\r\n  computed: {\r\n    formData() {\r\n      return MODAL_FORM_DATA[this.type]?.children\r\n    },\r\n    rules() {\r\n      return VALIDATE_DATA\r\n    },\r\n    treeData() {\r\n      return this.formatTreeData(dynamicRoutes)\r\n    }\r\n  },\r\n  async mounted() {\r\n    if (this.type.includes('User')) this.getRoleList()\r\n  },\r\n  methods: {\r\n    formatTreeData(datas) {\r\n      return datas.map(item => {\r\n        if (!item.children) {\r\n          return {\r\n            id: item.meta.id,\r\n            name: item.name\r\n          }\r\n        }\r\n        if (item.children) {\r\n          return {\r\n            id: item.meta.id,\r\n            name: item.name,\r\n            children: this.formatTreeData(item.children)\r\n          }\r\n        }\r\n      })\r\n    },\r\n    async getRoleList() {\r\n      let result = await this.$axios('getRoleList')\r\n      this.roleList = result.data.roleList\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n\r\n</style>\r\n"]}]}