{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\电商管理\\background-manage-system\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\电商管理\\background-manage-system\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\Administrator\\Desktop\\电商管理\\background-manage-system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\电商管理\\background-manage-system\\src\\components\\base\\BaseForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\电商管理\\background-manage-system\\src\\components\\base\\BaseForm.vue","mtime":1665388792954},{"path":"C:\\Users\\Administrator\\Desktop\\电商管理\\background-manage-system\\babel.config.js","mtime":1654661870493},{"path":"C:\\Users\\Administrator\\Desktop\\电商管理\\background-manage-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1654578877485},{"path":"C:\\Users\\Administrator\\Desktop\\电商管理\\background-manage-system\\node_modules\\babel-loader\\lib\\index.js","mtime":1654578881393},{"path":"C:\\Users\\Administrator\\Desktop\\电商管理\\background-manage-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1654578877485},{"path":"C:\\Users\\Administrator\\Desktop\\电商管理\\background-manage-system\\node_modules\\vue-loader\\lib\\index.js","mtime":1654578883487}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiQzovVXNlcnMvQWRtaW5pc3RyYXRvci9EZXNrdG9wL1x1NzUzNVx1NTU0Nlx1N0JBMVx1NzQwNi9iYWNrZ3JvdW5kLW1hbmFnZS1zeXN0ZW0vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3JlZ2VuZXJhdG9yUnVudGltZS5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJDOi9Vc2Vycy9BZG1pbmlzdHJhdG9yL0Rlc2t0b3AvXHU3NTM1XHU1NTQ2XHU3QkExXHU3NDA2L2JhY2tncm91bmQtbWFuYWdlLXN5c3RlbS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBNT0RBTF9GT1JNX0RBVEEgZnJvbSAnQC9jb25maWcvbW9kYWxGb3JtLmNvbmZpZyc7CmltcG9ydCBWQUxJREFURV9EQVRBIGZyb20gJ0AvY29uZmlnL3ZhbGlkYXRlLmNvbmZpZyc7CmltcG9ydCB7IGR5bmFtaWNSb3V0ZXMgfSBmcm9tICJAL3JvdXRlci9pbmRleCI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQmFzZUZvcm0nLAogIGNvbXBvbmVudHM6IHt9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkZWZhdWx0UHJvcHM6IHsKICAgICAgICBjaGlsZHJlbjogJ2NoaWxkcmVuJywKICAgICAgICBsYWJsZTogJ25hbWUnCiAgICAgIH0sCiAgICAgIHJvbGVMaXN0OiBbXQogICAgfTsKICB9LAogIHByb3BzOiB7CiAgICB0eXBlOiB7CiAgICAgIHR5cGU6IFN0cmluZwogICAgfSwKICAgIGZvcm06IHsKICAgICAgdHlwZTogT2JqZWN0CiAgICB9LAogICAgc2VsZWN0T3B0aW9uczogewogICAgICB0eXBlOiBPYmplY3QKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICB0eXBlOiBmdW5jdGlvbiB0eXBlKF90eXBlKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmIChfdHlwZS5pbmNsdWRlcygnVXNlcicpKSBfdGhpcy5nZXRSb2xlTGlzdCgpOwoKICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgZm9ybURhdGE6IGZ1bmN0aW9uIGZvcm1EYXRhKCkgewogICAgICB2YXIgX01PREFMX0ZPUk1fREFUQSR0aGlzOwoKICAgICAgcmV0dXJuIChfTU9EQUxfRk9STV9EQVRBJHRoaXMgPSBNT0RBTF9GT1JNX0RBVEFbdGhpcy50eXBlXSkgPT09IG51bGwgfHwgX01PREFMX0ZPUk1fREFUQSR0aGlzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfTU9EQUxfRk9STV9EQVRBJHRoaXMuY2hpbGRyZW47CiAgICB9LAogICAgcnVsZXM6IGZ1bmN0aW9uIHJ1bGVzKCkgewogICAgICByZXR1cm4gVkFMSURBVEVfREFUQTsKICAgIH0sCiAgICB0cmVlRGF0YTogZnVuY3Rpb24gdHJlZURhdGEoKSB7CiAgICAgIHJldHVybiB0aGlzLmZvcm1hdFRyZWVEYXRhKGR5bmFtaWNSb3V0ZXMpOwogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIGNvbnNvbGUubG9nKHRoaXMuc2VsZWN0T3B0aW9ucyk7CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgaWYgKF90aGlzMi50eXBlLmluY2x1ZGVzKCdVc2VyJykpIF90aGlzMi5nZXRSb2xlTGlzdCgpOwoKICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTIpOwogICAgfSkpKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBmb3JtYXRUcmVlRGF0YTogZnVuY3Rpb24gZm9ybWF0VHJlZURhdGEoZGF0YXMpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICByZXR1cm4gZGF0YXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgaWYgKCFpdGVtLmNoaWxkcmVuKSB7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBpZDogaXRlbS5tZXRhLmlkLAogICAgICAgICAgICBuYW1lOiBpdGVtLm5hbWUKICAgICAgICAgIH07CiAgICAgICAgfQoKICAgICAgICBpZiAoaXRlbS5jaGlsZHJlbikgewogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgaWQ6IGl0ZW0ubWV0YS5pZCwKICAgICAgICAgICAgbmFtZTogaXRlbS5uYW1lLAogICAgICAgICAgICBjaGlsZHJlbjogX3RoaXMzLmZvcm1hdFRyZWVEYXRhKGl0ZW0uY2hpbGRyZW4pCiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgZ2V0Um9sZUxpc3Q6IGZ1bmN0aW9uIGdldFJvbGVMaXN0KCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICAgIHZhciByZXN1bHQ7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczQuJGF4aW9zKCdnZXRSb2xlTGlzdCcpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgICAgIF90aGlzNC5yb2xlTGlzdCA9IHJlc3VsdC5kYXRhLnJvbGVMaXN0OwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMpOwogICAgICB9KSkoKTsKICAgIH0KICB9Cn07"},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0DA;AACA;AACA;AACA;EACAA,gBADA;EAEAC,cAFA;EAKAC,IALA,kBAKA;IACA;MACAC;QACAC,oBADA;QAEAC;MAFA,CADA;MAKAC;IALA;EAOA,CAbA;EAcAC;IACAC;MACAA;IADA,CADA;IAIAC;MACAD;IADA,CAJA;IAOAE;MACAF;IADA;EAPA,CAdA;EAyBAG;IACAH,IADA,gBACAA,KADA,EACA;MAAA;;MAAA;QAAA;UAAA;YAAA;cAAA;gBACA;;cADA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;EAHA,CAzBA;EA8BAI;IACAC,QADA,sBACA;MAAA;;MACA;IACA,CAHA;IAIAC,KAJA,mBAIA;MACA;IACA,CANA;IAOAC,QAPA,sBAOA;MACA;IACA;EATA,CA9BA;EAyCAC,OAzCA,qBAyCA;IACAC;EACA,CA3CA;EA4CAC,OA5CA,qBA4CA;IAAA;;IAAA;MAAA;QAAA;UAAA;YAAA;cACA;;YADA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;EAEA,CA9CA;EA+CAC;IACAC,cADA,0BACAC,KADA,EACA;MAAA;;MACA;QACA;UACA;YACAC,gBADA;YAEAtB;UAFA;QAIA;;QACA;UACA;YACAsB,gBADA;YAEAtB,eAFA;YAGAI;UAHA;QAKA;MACA,CAdA;IAeA,CAjBA;IAkBAmB,WAlBA,yBAkBA;MAAA;;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACA,4BADA;;cAAA;gBACAC,MADA;gBAEA;;cAFA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAGA;EArBA;AA/CA","names":["name","components","data","defaultProps","children","lable","roleList","props","type","form","selectOptions","watch","computed","formData","rules","treeData","created","console","mounted","methods","formatTreeData","datas","id","getRoleList","result"],"sourceRoot":"src/components/base","sources":["BaseForm.vue"],"sourcesContent":["<template>\r\n  <div class=\"\">\r\n    <el-form :model=\"form\"\r\n             :rules=\"rules\"\r\n             ref=\"validateForm\">\r\n      <el-form-item v-for=\"item in formData\"\r\n                    :key=\"item.query\"\r\n                    :prop=\"item['query']\"\r\n                    :label=\"item.label\"\r\n                    label-width=\"100px\">\r\n        <template v-if=\"['text','email'].includes(item.type)\">\r\n          <el-input v-model=\"form[item['query']]\"\r\n                    :show-password=\"item['query'] === 'password'\"\r\n                    :placeholder=\"item.placeholder\"></el-input>\r\n        </template>\r\n        <template v-if=\"item.type==='select'\">\r\n          <el-select v-model=\"form[item['query']]\"\r\n                     :placeholder=\"item.placeholder\">\r\n            <el-option v-for=\"opt in roleList\"\r\n                       :key=\"opt.id\"\r\n                       :label=\"opt.roleName\"\r\n                       :value=\"opt.id\"></el-option>\r\n          </el-select>\r\n        </template>\r\n        <template v-if=\"item.type==='tree'\">\r\n          <el-tree :data=\"treeData\"\r\n                   :props=\"defaultProps\"\r\n                   default-expand-all\r\n                   ref=\"tree\"\r\n                   show-checkbox\r\n                   node-key=\"id\"\r\n                   :default-checked-keys=\"form.roleAuth\"\r\n                   highlight-current>\r\n            <span class=\"custom-tree-node\"\r\n                  slot-scope=\"{data}\">\r\n              <span>{{data.name }}</span>\r\n            </span>\r\n          </el-tree>\r\n        </template>\r\n        <template v-if=\"item.type==='allowCreateSelect'\">\r\n          <el-select v-model=\"form[item['query']]\"\r\n                     filterable\r\n                     size=\"mini\"\r\n                     allow-create\r\n                     default-first-option\r\n                     :placeholder=\"item['placeholder']\">\r\n            <el-option v-for=\"option in selectOptions[item['query']]\"\r\n                       :key=\"option.id\"\r\n                       :label=\"option.categoryName\"\r\n                       :value=\"option.categoryName\"></el-option>\r\n          </el-select>\r\n        </template>\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport MODAL_FORM_DATA from '@/config/modalForm.config'\r\nimport VALIDATE_DATA from '@/config/validate.config'\r\nimport { dynamicRoutes } from \"@/router/index\"\r\nexport default {\r\n  name: 'BaseForm',\r\n  components: {\r\n\r\n  },\r\n  data() {\r\n    return {\r\n      defaultProps: {\r\n        children: 'children',\r\n        lable: 'name'\r\n      },\r\n      roleList: []\r\n    }\r\n  },\r\n  props: {\r\n    type: {\r\n      type: String\r\n    },\r\n    form: {\r\n      type: Object\r\n    },\r\n    selectOptions: {\r\n      type: Object\r\n    }\r\n  },\r\n  watch: {\r\n    async type(type) {\r\n      if (type.includes('User')) this.getRoleList()\r\n    }\r\n  },\r\n  computed: {\r\n    formData() {\r\n      return MODAL_FORM_DATA[this.type]?.children\r\n    },\r\n    rules() {\r\n      return VALIDATE_DATA\r\n    },\r\n    treeData() {\r\n      return this.formatTreeData(dynamicRoutes)\r\n    }\r\n  },\r\n  created() {\r\n    console.log(this.selectOptions)\r\n  },\r\n  async mounted() {\r\n    if (this.type.includes('User')) this.getRoleList()\r\n  },\r\n  methods: {\r\n    formatTreeData(datas) {\r\n      return datas.map(item => {\r\n        if (!item.children) {\r\n          return {\r\n            id: item.meta.id,\r\n            name: item.name\r\n          }\r\n        }\r\n        if (item.children) {\r\n          return {\r\n            id: item.meta.id,\r\n            name: item.name,\r\n            children: this.formatTreeData(item.children)\r\n          }\r\n        }\r\n      })\r\n    },\r\n    async getRoleList() {\r\n      let result = await this.$axios('getRoleList')\r\n      this.roleList = result.data.roleList\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n\r\n</style>\r\n"]}]}