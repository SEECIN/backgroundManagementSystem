{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\电商管理\\background-manage-system\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\电商管理\\background-manage-system\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\Administrator\\Desktop\\电商管理\\background-manage-system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\电商管理\\background-manage-system\\src\\components\\main-content\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\电商管理\\background-manage-system\\src\\components\\main-content\\index.vue","mtime":1666968705824},{"path":"C:\\Users\\Administrator\\Desktop\\电商管理\\background-manage-system\\babel.config.js","mtime":1666968674908},{"path":"C:\\Users\\Administrator\\Desktop\\电商管理\\background-manage-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1666968684658},{"path":"C:\\Users\\Administrator\\Desktop\\电商管理\\background-manage-system\\node_modules\\babel-loader\\lib\\index.js","mtime":1666968682927},{"path":"C:\\Users\\Administrator\\Desktop\\电商管理\\background-manage-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1666968684658},{"path":"C:\\Users\\Administrator\\Desktop\\电商管理\\background-manage-system\\node_modules\\vue-loader\\lib\\index.js","mtime":1666968703727}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC1pbmRleC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC52YWx1ZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zZWFyY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZS5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBDb250ZW50SGVhZCBmcm9tICJjb21wb25lbnRzL21haW4tY29udGVudC9jb21wb25lbnQvQ29udGVudEhlYWQiOwppbXBvcnQgVGFibGUgZnJvbSAiY29tcG9uZW50cy9tYWluLWNvbnRlbnQvY29tcG9uZW50L1RhYmxlIjsKaW1wb3J0IFBhZ2luYXRpb24gZnJvbSAiY29tcG9uZW50cy9tYWluLWNvbnRlbnQvY29tcG9uZW50L1BhZ2luYXRpb24iOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ2luZGV4JywKICBjb21wb25lbnRzOiB7CiAgICBDb250ZW50SGVhZDogQ29udGVudEhlYWQsCiAgICBUYWJsZTogVGFibGUsCiAgICBQYWdpbmF0aW9uOiBQYWdpbmF0aW9uCiAgfSwKICBwcm9wczogewogICAgZGF0YXM6IHsKICAgICAgdHlwZTogT2JqZWN0CiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaXNTZWFyY2g6IGZhbHNlLAogICAgICBzZWFyY2hEYXRhOiBbXSwKICAgICAgdGFibGVEYXRhOiBbXSwKICAgICAgcGFnaW5hdGlvbkRhdGE6IHsKICAgICAgICB0b3RhbDogMCwKICAgICAgICBjdXJyZW50UGFnZTogMSwKICAgICAgICBwYWdlU2l6ZTogNQogICAgICB9CiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgdGhpcy5pbml0KCk7CiAgICB0aGlzLiRidXMuJG9uKCdjaGFuZ2VEYXRhJywgZnVuY3Rpb24gKGRhdGEsIHR5cGUpIHsKICAgICAgdmFyIGlkeCA9IF90aGlzLmRhdGFzLnRhYmxlQ29udGVudERhdGEuZmluZEluZGV4KGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcmV0dXJuIGl0ZW0uaWQgPT09IGRhdGEuaWQ7CiAgICAgIH0pOwoKICAgICAgaWYgKGlkeCAhPT0gLTEpIHsKICAgICAgICBpZiAodHlwZSAmJiB0eXBlLmluY2x1ZGVzKCdkZWxldGUnKSkgewogICAgICAgICAgaWYgKHR5cGUgPT09ICJkZWxldGVQcm9kdWN0c0NhdGVnb3J5IiAmJiAhZGF0YS5lbXB0eSkgewogICAgICAgICAgICBfdGhpcy5kYXRhcy50YWJsZUNvbnRlbnREYXRhLnNwbGljZShpZHgsIDEsIGRhdGEpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgX3RoaXMuZGF0YXMudGFibGVDb250ZW50RGF0YS5zcGxpY2UoaWR4LCAxKTsKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgbGVuID0gX3RoaXMuZGF0YXMudGFibGVDb250ZW50RGF0YS5sZW5ndGg7CgogICAgICAgICAgaWYgKGxlbiAlIDUgPT09IDAgJiYgX3RoaXMucGFnaW5hdGlvbkRhdGEuY3VycmVudFBhZ2UgIT09IDEpIHsKICAgICAgICAgICAgX3RoaXMucGFnaW5hdGlvbkRhdGEuY3VycmVudFBhZ2UtLTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMuZGF0YXMudGFibGVDb250ZW50RGF0YS5zcGxpY2UoaWR4LCAxLCBkYXRhKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgX3RoaXMuZGF0YXMudGFibGVDb250ZW50RGF0YS5wdXNoKGRhdGEpOwogICAgICB9CgogICAgICBfdGhpcy5pbml0KCk7CiAgICB9KTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICB0aGlzLiRidXMuJG9uKCJzZWFyY2giLCBmdW5jdGlvbiAodmFsKSB7CiAgICAgIHZhciBfdGhpczIkc2VhcmNoRGF0YTsKCiAgICAgIF90aGlzMi5pc1NlYXJjaCA9IHRydWU7CiAgICAgIF90aGlzMi5zZWFyY2hEYXRhID0gX3RoaXMyLmRhdGFzLnRhYmxlQ29udGVudERhdGEuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfT2JqZWN0JHZhbHVlcyA9IE9iamVjdC52YWx1ZXMoaXRlbSk7IF9pIDwgX09iamVjdCR2YWx1ZXMubGVuZ3RoOyBfaSsrKSB7CiAgICAgICAgICB2YXIgY3VyciA9IF9PYmplY3QkdmFsdWVzW19pXTsKCiAgICAgICAgICBpZiAoU3RyaW5nKGN1cnIpLnNlYXJjaCh2YWwpICE9PSAtMSkgewogICAgICAgICAgICByZXR1cm4gaXRlbTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgICBfdGhpczIucGFnaW5hdGlvbkRhdGEudG90YWwgPSAoX3RoaXMyJHNlYXJjaERhdGEgPSBfdGhpczIuc2VhcmNoRGF0YSkgPT09IG51bGwgfHwgX3RoaXMyJHNlYXJjaERhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzMiRzZWFyY2hEYXRhLmxlbmd0aDsKCiAgICAgIF90aGlzMi5oYW5kbGVTaXplQ2hhbmdlKF90aGlzMi5wYWdpbmF0aW9uRGF0YS5wYWdlU2l6ZSk7CiAgICB9KTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGluaXQ6IGZ1bmN0aW9uIGluaXQoKSB7CiAgICAgIHZhciBfdGhpcyRkYXRhcyR0YWJsZUNvbnQ7CgogICAgICB0aGlzLnRhYmxlRGF0YSA9IHRoaXMuZGF0YXMudGFibGVDb250ZW50RGF0YTsKICAgICAgdGhpcy5wYWdpbmF0aW9uRGF0YS50b3RhbCA9IChfdGhpcyRkYXRhcyR0YWJsZUNvbnQgPSB0aGlzLmRhdGFzLnRhYmxlQ29udGVudERhdGEpID09PSBudWxsIHx8IF90aGlzJGRhdGFzJHRhYmxlQ29udCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkZGF0YXMkdGFibGVDb250Lmxlbmd0aDsKICAgICAgdGhpcy5oYW5kbGVDdXJyZW50Q2hhbmdlKHRoaXMucGFnaW5hdGlvbkRhdGEuY3VycmVudFBhZ2UpOwogICAgfSwKICAgIGhhbmRsZVNpemVDaGFuZ2U6IGZ1bmN0aW9uIGhhbmRsZVNpemVDaGFuZ2Uoc2l6ZSkgewogICAgICBpZiAodGhpcy5kYXRhcy5uZWVkUGFnaW5hdGlvbikgewogICAgICAgIHRoaXMucGFnaW5hdGlvbkRhdGEucGFnZVNpemUgPSBzaXplOwogICAgICAgIHZhciBzdGFydCA9ICh0aGlzLnBhZ2luYXRpb25EYXRhLmN1cnJlbnRQYWdlIC0gMSkgKiBzaXplOwogICAgICAgIHZhciBlbmQgPSB0aGlzLnBhZ2luYXRpb25EYXRhLmN1cnJlbnRQYWdlICogc2l6ZTsKICAgICAgICB0aGlzLnRhYmxlRGF0YSA9IHRoaXMuaXNTZWFyY2ggPyB0aGlzLnNlYXJjaERhdGEuc2xpY2Uoc3RhcnQsIGVuZCkgOiB0aGlzLmRhdGFzLnRhYmxlQ29udGVudERhdGEuc2xpY2Uoc3RhcnQsIGVuZCk7CiAgICAgIH0KICAgIH0sCiAgICBoYW5kbGVDdXJyZW50Q2hhbmdlOiBmdW5jdGlvbiBoYW5kbGVDdXJyZW50Q2hhbmdlKGN1cnJlbnQpIHsKICAgICAgaWYgKHRoaXMuZGF0YXMubmVlZFBhZ2luYXRpb24pIHsKICAgICAgICB0aGlzLnBhZ2luYXRpb25EYXRhLmN1cnJlbnRQYWdlID0gY3VycmVudDsKICAgICAgICB0aGlzLmhhbmRsZVNpemVDaGFuZ2UodGhpcy5wYWdpbmF0aW9uRGF0YS5wYWdlU2l6ZSk7CiAgICAgIH0KICAgIH0KICB9LAogIGJlZm9yZURlc3Ryb3k6IGZ1bmN0aW9uIGJlZm9yZURlc3Ryb3koKSB7CiAgICB0aGlzLiRidXMuJG9mZignY2hhbmdlRGF0YScpOwogIH0KfTs="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;AAaA;AACA;AACA;AACA;EACAA,aADA;EAEAC;IACAC,wBADA;IACAC,YADA;IACAC;EADA,CAFA;EAKAC;IACAC;MACAC;IADA;EADA,CALA;EAUAC,IAVA,kBAUA;IACA;MACAC,eADA;MAEAC,cAFA;MAGAC,aAHA;MAIAC;QACAC,QADA;QAEAC,cAFA;QAGAC;MAHA;IAJA;EAUA,CArBA;EAsBAC,OAtBA,qBAsBA;IAAA;;IACA;IACA;MACA;QAAA;MAAA;;MACA;QACA;UACA;YACA;UACA,CAFA,MAEA;YACA;UACA;;UACA;;UACA;YACA;UACA;QACA,CAVA,MAUA;UACA;QACA;MACA,CAdA,MAcA;QACA;MACA;;MACA;IACA,CApBA;EAqBA,CA7CA;EA8CAC,OA9CA,qBA8CA;IAAA;;IACA;MAAA;;MACA;MACA;QACA;UAAA;;UACA;YACA;UACA;QACA;MACA,CANA;MAOA;;MACA;IACA,CAXA;EAYA,CA3DA;EA4DAC;IACAC,IADA,kBACA;MAAA;;MACA;MACA;MACA;IACA,CALA;IAMAC,gBANA,4BAMAC,IANA,EAMA;MACA;QACA;QACA;QACA;QACA;MACA;IACA,CAbA;IAcAC,mBAdA,+BAcAC,OAdA,EAcA;MACA;QACA;QACA;MACA;IACA;EAnBA,CA5DA;EAiFAC,aAjFA,2BAiFA;IACA;EACA;AAnFA","names":["name","components","ContentHead","Table","Pagination","props","datas","type","data","isSearch","searchData","tableData","paginationData","total","currentPage","pageSize","created","mounted","methods","init","handleSizeChange","size","handleCurrentChange","current","beforeDestroy"],"sourceRoot":"src/components/main-content","sources":["index.vue"],"sourcesContent":["<template>\r\n  <div class=\"content\">\r\n    <ContentHead :contentHead=\"datas.contentHead\"\r\n                 v-if=\"datas.contentHead\" />\r\n    <Table :tableData=\"tableData\" />\r\n    <Pagination v-if=\"datas.needPagination\"\r\n                :handleSizeChange=\"handleSizeChange\"\r\n                :handleCurrentChange=\"handleCurrentChange\"\r\n                :paginationData=\"paginationData\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport ContentHead from \"components/main-content/component/ContentHead\"\r\nimport Table from \"components/main-content/component/Table\"\r\nimport Pagination from \"components/main-content/component/Pagination\"\r\nexport default {\r\n  name: 'index',\r\n  components: {\r\n    ContentHead, Table, Pagination\r\n  },\r\n  props: {\r\n    datas: {\r\n      type: Object\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      isSearch: false,\r\n      searchData: [],\r\n      tableData: [],\r\n      paginationData: {\r\n        total: 0,\r\n        currentPage: 1,\r\n        pageSize: 5\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.init()\r\n    this.$bus.$on('changeData', (data, type) => {\r\n      let idx = this.datas.tableContentData.findIndex(item => item.id === data.id)\r\n      if (idx !== -1) {\r\n        if (type && type.includes('delete')) {\r\n          if (type === \"deleteProductsCategory\" && !data.empty) {\r\n            this.datas.tableContentData.splice(idx, 1, data)\r\n          } else {\r\n            this.datas.tableContentData.splice(idx, 1)\r\n          }\r\n          let len = this.datas.tableContentData.length\r\n          if (len % 5 === 0 && this.paginationData.currentPage !== 1) {\r\n            this.paginationData.currentPage--\r\n          }\r\n        } else {\r\n          this.datas.tableContentData.splice(idx, 1, data)\r\n        }\r\n      } else {\r\n        this.datas.tableContentData.push(data)\r\n      }\r\n      this.init()\r\n    })\r\n  },\r\n  mounted() {\r\n    this.$bus.$on(\"search\", (val) => {\r\n      this.isSearch = true\r\n      this.searchData = this.datas.tableContentData.filter(item => {\r\n        for (let curr of Object.values(item)) {\r\n          if (String(curr).search(val) !== -1) {\r\n            return item\r\n          }\r\n        }\r\n      })\r\n      this.paginationData.total = this.searchData?.length\r\n      this.handleSizeChange(this.paginationData.pageSize)\r\n    })\r\n  },\r\n  methods: {\r\n    init() {\r\n      this.tableData = this.datas.tableContentData\r\n      this.paginationData.total = this.datas.tableContentData?.length\r\n      this.handleCurrentChange(this.paginationData.currentPage)\r\n    },\r\n    handleSizeChange(size) {\r\n      if (this.datas.needPagination) {\r\n        this.paginationData.pageSize = size\r\n        let start = (this.paginationData.currentPage - 1) * size\r\n        let end = this.paginationData.currentPage * size\r\n        this.tableData = this.isSearch ? this.searchData.slice(start, end) : this.datas.tableContentData.slice(start, end)\r\n      }\r\n    },\r\n    handleCurrentChange(current) {\r\n      if (this.datas.needPagination) {\r\n        this.paginationData.currentPage = current\r\n        this.handleSizeChange(this.paginationData.pageSize)\r\n      }\r\n    }\r\n  },\r\n  beforeDestroy() {\r\n    this.$bus.$off('changeData')\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n</style>\r\n"]}]}