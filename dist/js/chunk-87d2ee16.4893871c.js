(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-87d2ee16"],{"07ac":function(e,t,a){var n=a("23e7"),i=a("6f53").values;n({target:"Object",stat:!0},{values:function(e){return i(e)}})},"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"3b57":function(e,t,a){e.exports=a.p+"img/no-image.5ea05e89.webp"},4449:function(e,t,a){},"7b10":function(e,t,a){},8132:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[e.datas.contentHead?a("ContentHead",{attrs:{contentHead:e.datas.contentHead}}):e._e(),a("Table",{attrs:{tableData:e.tableData}}),e.datas.needPagination?a("Pagination",{attrs:{handleSizeChange:e.handleSizeChange,handleCurrentChange:e.handleCurrentChange,paginationData:e.paginationData}}):e._e()],1)},i=[],r=(a("c740"),a("caad"),a("2532"),a("a434"),a("4de4"),a("d3b7"),a("07ac"),a("ac1f"),a("841c"),a("fb6a"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content-head"},[e.contentHead.assembly.includes("input")?[a("el-input",{staticClass:"content-head--input",attrs:{placeholder:"请输入内容","prefix-icon":"el-icon-search",clearable:!0},on:{change:e.search},model:{value:e.searchVal,callback:function(t){e.searchVal=t},expression:"searchVal"}})]:e._e(),e.contentHead.assembly.includes("button")?[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleButton(e.contentHead.modalType)}}},[e._v("添加"+e._s(e.contentHead.keywords))])]:e._e()],2)}),s=[],o={methods:{openModal:function(e){this.$store.dispatch("modal/open",e)}}},c={name:"ContentHead",components:{},mixins:[o],data:function(){return{searchVal:""}},props:{contentHead:{type:Object}},created:function(){this.searchVal=""},methods:{search:function(){this.$bus.$emit("search",this.searchVal)},handleButton:function(e){this.openModal(e)}}},l=c,d=(a("b29a"),a("2877")),u=Object(d["a"])(l,r,s,!1,null,"002d33d9",null),p=u.exports,h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"table"},[n("el-table",{attrs:{data:e.tableData,border:"","row-key":"id","tree-props":{children:"child"},"max-height":e.maxHeight,stripe:""},on:{"expand-change":e.expandChange}},["订单管理"===e.$route.name?n("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-steps",{attrs:{direction:"vertical",space:70}},e._l(t.row.positions,(function(e,t){return n("el-step",{key:t,attrs:{status:"process",icon:"el-icon-delete-location",title:e.address,description:e.time}})})),1)]}}],null,!1,3909256886)}):e._e(),"商品列表"===e.$route.name?n("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{staticClass:"table-expand"},[n("div",{staticClass:"expand-image"},[n("p",[e._v("商品图片：")]),t.row.productImages.length>0?n("div",[n("vuescroll",{attrs:{ops:e.ops}},e._l(t.row.productImages,(function(a,i){return n("div",{key:i,staticClass:"expand-image--img"},[n("el-image",{ref:"previewImg",refInFor:!0,staticStyle:{height:"120px"},attrs:{src:a,"preview-src-list":t.row.productImages}}),n("span",{staticClass:"expand-image--mask"},[n("span",{on:{click:function(t){return e.showPreview(a)}}},[n("i",{staticClass:"el-icon-zoom-in",staticStyle:{color:"#fff"}})]),n("span",{on:{click:function(n){return e.handleImageDelete(a,t.row)}}},[n("i",{staticClass:"el-icon-delete",staticStyle:{color:"#fff"}})])])],1)})),0)],1):n("div",[n("img",{attrs:{src:a("3b57"),alt:""}})])]),n("div",{staticClass:"expand-upload"},[n("div",{staticClass:"expand-upload--head"},[n("span",[e._v("添加图片：")]),n("div",[n("el-button",{attrs:{type:"info",size:"mini",round:""},on:{click:function(a){return e.resetDatas(t.row.id)}}},[e._v("清空已选文件")]),n("el-button",{attrs:{type:"primary",size:"mini",round:""},on:{click:function(a){e.handleImageUpload(t.row.id)}}},[e._v("上传图片")])],1)]),n("div",{staticClass:"expand-upload--main"},[n("el-upload",{ref:"upload",staticStyle:{"vertical-align":"middle"},attrs:{action:"","list-type":"picture-card","show-file-list":!1,multiple:"","auto-upload":!1,limit:10,"on-change":function(a){e.handleUploadChange(a,t.row.id)},"http-request":e.handleImageUpload}},[n("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},slot:"default"})]),n("div",{staticClass:"expand-upload--preview"},[n("vuescroll",{attrs:{ops:e.ops}},e._l(e.uploadFilesPreview[t.row.id],(function(a,i){return n("div",{key:a.uid,staticClass:"expand-image--img"},[n("el-image",{ref:"uploadPreviewImg",refInFor:!0,staticStyle:{height:"120px"},attrs:{src:a.url,"preview-src-list":e.uploadPreviews[t.row.id]}}),n("span",{staticClass:"expand-image--mask"},[n("span",{on:{click:function(t){return e.showUploadPreview(a.url)}}},[n("i",{staticClass:"el-icon-zoom-in",staticStyle:{color:"#fff"}})]),n("span",{on:{click:function(n){return e.deleteUploadPreview(t.row.id,a.uid,i)}}},[n("i",{staticClass:"el-icon-delete",staticStyle:{color:"#fff"}})])])],1)})),0)],1)],1)])])]}}],null,!1,1442922197)}):e._e(),e._l(e.tableHeadData,(function(t,a){return n("el-table-column",{key:a,attrs:{label:t.name},scopedSlots:e._u([{key:"default",fn:function(a){return["text"===t.type?n("span",[e._v(e._s(a.row[t.field]||"/"))]):e._e(),"tag"===t.type?n("el-tag",{attrs:{type:a.row.tagData.type}},[e._v(e._s(a.row.tagData.text))]):e._e(),"switch"===t.type?n("el-switch",{attrs:{value:a.row.status,"active-value":1,"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(n){return e.handleChangeSwitch(a.row,t.messageType,t.axiosType)}}}):e._e(),"button"===t.type?e._l(t.field,(function(t,i){return n("el-button",{key:i,attrs:{type:t.type},on:{click:function(n){return e.hanldeClickButton(t.axiosType,a.row)}}},[e._v(" "+e._s(t.text)+" ")])})):e._e()]}}],null,!0)})}))],2)],1)},f=[],g=(a("0fb7"),a("450d"),a("f529")),m=a.n(g),v=a("c7eb"),b=a("1da1"),y=(a("b0c0"),a("a9e3"),a("d81d"),a("00b4"),a("49c2")),x=a.n(y),w=(a("9e1f"),a("6ed5")),C=a.n(w);function D(e){var t=e.messageInfo,a=e.confirmCallback,n=e.cancelCallback;C.a.confirm(t,{showClose:!1,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a&&a()})).catch((function(){n&&n(),m()({type:"info",message:"已取消此操作"})}))}var P={"权限列表":[{name:"权限名称",field:"name",type:"text"},{name:"路径",field:"path",type:"text"},{name:"权限等级",field:"level",type:"tag"}],"用户列表":[{name:"用户名",field:"username",type:"text"},{name:"角色",field:"roleName",type:"text"},{name:"状态",field:"status",type:"switch",messageType:"changeStatus",axiosType:"editUser"},{name:"操作",type:"button",field:[{type:"primary",text:"修改用户信息",axiosType:"editUser"},{type:"danger",text:"删除",axiosType:"deleteUser"}]}],"角色列表":[{name:"角色",field:"roleName",type:"text"},{name:"角色描述",field:"roleDescription",type:"text"},{name:"操作",type:"button",field:[{type:"primary",text:"修改角色信息",axiosType:"editRole"},{type:"danger",text:"删除",axiosType:"deleteRole"}]}],"订单管理":[{name:"订单ID",field:"id",type:"text"},{name:"下单时间",field:"orderTime",type:"text"},{name:"收件人",field:"addressee",type:"text"},{name:"电话号码",field:"phone",type:"text"},{name:"收件地址",field:"address",type:"text"},{name:"备注",field:"remarks",type:"text"}],"商品分类":[{name:"分类名称",field:"categoryName",type:"text"},{name:"分类等级",field:"level",type:"tag"},{name:"操作",type:"button",field:[{type:"primary",text:"修改分类信息",axiosType:"editProductsCategory"},{type:"danger",text:"删除",axiosType:"deleteProductsCategory"}]}],"商品列表":[{name:"商品名称",field:"productName",type:"text"},{name:"商品描述",field:"productDescription",type:"text"},{name:"商品分类",field:"productClassify",type:"text"},{name:"商品价格(￥)",field:"productPrice",type:"text"},{name:"商品净重(kg)",field:"productWeight",type:"text"},{name:"操作",type:"button",field:[{type:"primary",text:"修改商品信息",axiosType:"editProduct"},{type:"danger",text:"删除",axiosType:"deleteProduct"}]}]},k={changeStatus:[{message:"是否启用该账户"},{message:"是否禁用该账户"}]},S={name:"Table",components:{vuescroll:x.a},data:function(){return{tableHeadData:[],transmitData:{},productFormData:{},dialogImageUrl:"",dialogVisible:!1,ops:{vuescroll:{mode:"native",sizeStrategy:"120px",detectResize:!1,locking:!1},scrollPanel:{initialScrollY:!1,initialScrollX:!1,scrollingX:!0,scrollingY:!1,speed:300,easing:void 0,verticalNativeBarPos:"right",maxHeight:void 0,maxWidth:void 0},bar:{showDelay:500,onlyShowBarOnScroll:!1,keepShow:!1,background:"#c1c1c1",opacity:1,hoverStyle:!1,specifyBorderRadius:!1,minSize:!1,size:"6px",disable:!1}},uploadFilesPreview:{},uploadPreviews:{}}},mixins:[o],props:{tableData:{type:Array}},created:function(){this.tableHeadData=P[this.$route.name]},computed:{maxHeight:function(){return window.innerHeight-310+"px"},expand:function(){var e;return null===(e=P[this.$route.name])||void 0===e?void 0:e.expand}},methods:{handleChangeSwitch:function(e,t,a){var n=this;return Object(b["a"])(Object(v["a"])().mark((function i(){var r;return Object(v["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:r=k[t][Number(e.status)].message,D({messageInfo:r,confirmCallback:function(){var t=Object(b["a"])(Object(v["a"])().mark((function t(){return Object(v["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.status=e.status?0:1,t.next=4,n.$axios(a,e);case 4:t.next=10;break;case 6:t.prev=6,t.t0=t["catch"](0),e.status=e.status?0:1,console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));function i(){return t.apply(this,arguments)}return i}()});case 2:case"end":return i.stop()}}),i)})))()},hanldeClickButton:function(e,t){var a=this;return Object(b["a"])(Object(v["a"])().mark((function n(){var i;return Object(v["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:i=Object.assign({},t),e.includes("edit")&&(a.$bus.$emit("transmitFormData",i),a.openModal(e)),e.includes("delete")&&D({messageInfo:"是否要删除此数据，删除后不可恢复",confirmCallback:function(){var t=Object(b["a"])(Object(v["a"])().mark((function t(){var n,r;return Object(v["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a.$axios(e,i);case 3:n=t.sent,r="deleteProductsCategory"===e?n.data.result:i,a.$bus.$emit("changeData",r,e),"deleteProductsCategory"===e&&a.$bus.$emit("formatSelectOptions"),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));function n(){return t.apply(this,arguments)}return n}()});case 3:case"end":return n.stop()}}),n)})))()},showPreview:function(e){this.$refs.previewImg.map((function(t){t.src===e&&(t.showViewer=!0)}))},handleImageDelete:function(e,t){var a=this;return Object(b["a"])(Object(v["a"])().mark((function n(){return Object(v["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:D({messageInfo:"是否删除此图片，删除后不可恢复",confirmCallback:function(){var n=Object(b["a"])(Object(v["a"])().mark((function n(){var i,r;return Object(v["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i={id:t.id,deleteImageUrl:e},n.next=3,a.$axios("editProduct",i);case 3:r=n.sent,a.$bus.$emit("changeData",r.data.result);case 5:case"end":return n.stop()}}),n)})));function i(){return n.apply(this,arguments)}return i}()});case 1:case"end":return n.stop()}}),n)})))()},handleUploadChange:function(e,t){var a=5242880;return e.size>a?(m()({type:"warning",message:"文件不得大于5M"}),!1):/image/g.test(e.raw.type)?(this.uploadFilesPreview[t].push(e),this.uploadPreviews[t].push(e.url),void this.productFormData[t].append(t+e.uid,e.raw)):(m()({type:"warning",message:"只能选择图片格式的文件"}),!1)},handleImageUpload:function(e){var t=this;return Object(b["a"])(Object(v["a"])().mark((function a(){var n;return Object(v["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(0!==t.uploadFilesPreview[e].length){a.next=3;break}return m()({type:"warning",message:"未选择图片"}),a.abrupt("return",!1);case 3:return t.productFormData[e].append("id",e),a.prev=4,a.next=7,t.$axios("addProduct",t.productFormData[e]);case 7:n=a.sent,t.$bus.$emit("changeData",n.data.result),t.resetDatas(e),a.next=15;break;case 12:a.prev=12,a.t0=a["catch"](4),console.log(a.t0);case 15:case"end":return a.stop()}}),a,null,[[4,12]])})))()},expandChange:function(e){this.uploadFilesPreview[e.id]||this.$set(this.uploadFilesPreview,e.id,[]),this.uploadPreviews[e.id]||this.$set(this.uploadPreviews,e.id,[]),this.productFormData[e.id]||this.$set(this.productFormData,e.id,new FormData)},showUploadPreview:function(e){this.$refs.uploadPreviewImg.filter((function(t){t.src===e&&(t.showViewer=!0)}))},deleteUploadPreview:function(e,t,a){this.uploadFilesPreview[e].splice(a,1),this.uploadPreviews[e].splice(a,1),this.productFormData[e].delete(e+t)},resetDatas:function(e){this.uploadFilesPreview[e]=[],this.uploadPreviews[e]=[],this.productFormData[e]=new FormData}}},_=S,$=(a("b5ac"),Object(d["a"])(_,h,f,!1,null,null,null)),O=$.exports,j=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":e.paginationData.currentPage,"page-sizes":[2,5,10],"page-size":e.paginationData.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.paginationData.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},I=[],z={name:"Pagination",components:{},data:function(){return{}},props:{handleSizeChange:{type:Function},handleCurrentChange:{type:Function},paginationData:{type:Object}},methods:{}},F=z,T=Object(d["a"])(F,j,I,!1,null,"3ad1f8ea",null),H=T.exports,U={name:"index",components:{ContentHead:p,Table:O,Pagination:H},props:{datas:{type:Object}},data:function(){return{isSearch:!1,searchData:[],tableData:[],paginationData:{total:0,currentPage:1,pageSize:5}}},created:function(){var e=this;this.init(),this.$bus.$on("changeData",(function(t,a){var n=e.datas.tableContentData.findIndex((function(e){return e.id===t.id}));if(-1!==n)if(a&&a.includes("delete")){"deleteProductsCategory"!==a||t.empty?e.datas.tableContentData.splice(n,1):e.datas.tableContentData.splice(n,1,t);var i=e.datas.tableContentData.length;i%5===0&&1!==e.paginationData.currentPage&&e.paginationData.currentPage--}else e.datas.tableContentData.splice(n,1,t);else e.datas.tableContentData.push(t);e.init()}))},mounted:function(){var e=this;this.$bus.$on("search",(function(t){var a;e.isSearch=!0,e.searchData=e.datas.tableContentData.filter((function(e){for(var a=0,n=Object.values(e);a<n.length;a++){var i=n[a];if(-1!==String(i).search(t))return e}})),e.paginationData.total=null===(a=e.searchData)||void 0===a?void 0:a.length,e.handleSizeChange(e.paginationData.pageSize)}))},methods:{init:function(){var e;this.tableData=this.datas.tableContentData,this.paginationData.total=null===(e=this.datas.tableContentData)||void 0===e?void 0:e.length,this.handleCurrentChange(this.paginationData.currentPage)},handleSizeChange:function(e){if(this.datas.needPagination){this.paginationData.pageSize=e;var t=(this.paginationData.currentPage-1)*e,a=this.paginationData.currentPage*e;this.tableData=this.isSearch?this.searchData.slice(t,a):this.datas.tableContentData.slice(t,a)}},handleCurrentChange:function(e){this.datas.needPagination&&(this.paginationData.currentPage=e,this.handleSizeChange(this.paginationData.pageSize))}},beforeDestroy:function(){this.$bus.$off("changeData")}},B=U,V=Object(d["a"])(B,n,i,!1,null,"6da06d2e",null);t["a"]=V.exports},"841c":function(e,t,a){"use strict";var n=a("c65b"),i=a("d784"),r=a("825a"),s=a("1d80"),o=a("129f"),c=a("577e"),l=a("dc4a"),d=a("14c3");i("search",(function(e,t,a){return[function(t){var a=s(this),i=void 0==t?void 0:l(t,e);return i?n(i,t,a):new RegExp(t)[e](c(a))},function(e){var n=r(this),i=c(e),s=a(t,n,i);if(s.done)return s.value;var l=n.lastIndex;o(l,0)||(n.lastIndex=0);var u=d(n,i);return o(n.lastIndex,l)||(n.lastIndex=l),null===u?-1:u.index}]}))},b29a:function(e,t,a){"use strict";a("4449")},b5ac:function(e,t,a){"use strict";a("7b10")},c740:function(e,t,a){"use strict";var n=a("23e7"),i=a("b727").findIndex,r=a("44d2"),s="findIndex",o=!0;s in[]&&Array(1)[s]((function(){o=!1})),n({target:"Array",proto:!0,forced:o},{findIndex:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),r(s)}}]);
//# sourceMappingURL=chunk-87d2ee16.4893871c.js.map