{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\电商管理\\background-manage-system\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\电商管理\\background-manage-system\\node_modules\\eslint-loader\\index.js??ref--14-0!C:\\Users\\Administrator\\Desktop\\电商管理\\background-manage-system\\src\\api\\common.js","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\电商管理\\background-manage-system\\src\\api\\common.js","mtime":1664005663866},{"path":"C:\\Users\\Administrator\\Desktop\\电商管理\\background-manage-system\\babel.config.js","mtime":1654661870493},{"path":"C:\\Users\\Administrator\\Desktop\\电商管理\\background-manage-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1654578877485},{"path":"C:\\Users\\Administrator\\Desktop\\电商管理\\background-manage-system\\node_modules\\babel-loader\\lib\\index.js","mtime":1654578881393},{"path":"C:\\Users\\Administrator\\Desktop\\电商管理\\background-manage-system\\node_modules\\eslint-loader\\index.js","mtime":1654578878263}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiQzovVXNlcnMvQWRtaW5pc3RyYXRvci9EZXNrdG9wL1x1NzUzNVx1NTU0Nlx1N0JBMVx1NzQwNi9iYWNrZ3JvdW5kLW1hbmFnZS1zeXN0ZW0vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3JlZ2VuZXJhdG9yUnVudGltZS5qcyI7CmltcG9ydCBfTWVzc2FnZTIgZnJvbSAiZWxlbWVudC11aS9saWIvdGhlbWUtY2hhbGsvbWVzc2FnZS5jc3MiOwppbXBvcnQgImVsZW1lbnQtdWkvbGliL3RoZW1lLWNoYWxrL2Jhc2UuY3NzIjsKaW1wb3J0IF9NZXNzYWdlIGZyb20gImVsZW1lbnQtdWkvbGliL21lc3NhZ2UiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQzovVXNlcnMvQWRtaW5pc3RyYXRvci9EZXNrdG9wL1x1NzUzNVx1NTU0Nlx1N0JBMVx1NzQwNi9iYWNrZ3JvdW5kLW1hbmFnZS1zeXN0ZW0vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZW50cmllcy5qcyI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBzdG9yZSBmcm9tICJzdG9yZSI7CmltcG9ydCBTdG9yZSBmcm9tICJAL3N0b3JlIjsKaW1wb3J0IFZ1ZSBmcm9tICd2dWUnOwppbXBvcnQgeyByZXNldFJvdXRlciB9IGZyb20gIkAvdXRpbC9yZXNldFJvdXRlciI7IC8vYXhpb3Ppu5jorqTlgLwKCnZhciBpbnN0YW5jZSA9IGF4aW9zLmNyZWF0ZSh7CiAgYmFzZVVSTDogIi9hcGkiLAogIHRpbWVvdXQ6IHByb2Nlc3MuZW52LlZVRV9BUFBfVElNRV9PVVQKfSk7IC8vcmVxdWVzdCDmi6bmiKrlmagKCmluc3RhbmNlLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZSggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShjb25maWcpIHsKICAgIHZhciBfc3RvcmUkZ2V0LCBfc3RvcmUkZ2V0MjsKCiAgICB2YXIgdG9rZW4sIHN0YXR1czsKICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgdG9rZW4gPSAoX3N0b3JlJGdldCA9IHN0b3JlLmdldChwcm9jZXNzLmVudi5WVUVfQVBQX1VTRVJfSU5GTykpID09PSBudWxsIHx8IF9zdG9yZSRnZXQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9zdG9yZSRnZXQudG9rZW47CiAgICAgICAgICAgIHN0YXR1cyA9IChfc3RvcmUkZ2V0MiA9IHN0b3JlLmdldChwcm9jZXNzLmVudi5WVUVfQVBQX1VTRVJfSU5GTykpID09PSBudWxsIHx8IF9zdG9yZSRnZXQyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfc3RvcmUkZ2V0Mi5zdGF0dXM7CgogICAgICAgICAgICBpZiAodG9rZW4pIHsKICAgICAgICAgICAgICBjb25maWcuaGVhZGVyc1snQXV0aG9yaXphdGlvbiddID0gIkJlYXJlciAiLmNvbmNhdCh0b2tlbik7CiAgICAgICAgICAgIH0gLy/lpoLmnpzlvZPliY3nlKjmiLfooqvnpoHnlKjvvIzpgqPkuYjmiYDmnInlop7liKDmlLnmk43kvZzml6Dms5Xov5vooYwKCgogICAgICAgICAgICBpZiAoIShbImRlbGV0ZSIsICJwdXQiLCAicG9zdCJdLmluY2x1ZGVzKGNvbmZpZy5tZXRob2QpICYmIHN0YXR1cyA9PT0gMCkpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNjsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgX01lc3NhZ2UoewogICAgICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJywKICAgICAgICAgICAgICBtZXNzYWdlOiAn5b2T5YmN55So5oi35bey6KKr56aB55So77yM5peg5rOV6L+b6KGM5pON5L2cJwogICAgICAgICAgICB9KTsgLy/kuK3mlq3or7fmsYIKCgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBQcm9taXNlLnJlamVjdCgi5b2T5YmN55So5oi35bey6KKr56aB55So77yM5peg5rOV6L+b6KGM5pON5L2cIikpOwoKICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgY29uZmlnKTsKCiAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZSk7CiAgfSkpOwoKICByZXR1cm4gZnVuY3Rpb24gKF94KSB7CiAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKSwgZnVuY3Rpb24gKGVycikgewogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnIpOwp9KTsgLy9yZXNwb25zZSDmi6bmiKrlmagKCmluc3RhbmNlLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgLy8g5aaC5p6c5piv5L+u5pS55b2T5YmN6KeS6Imy5oiW6ICF55So5oi35L+h5oGv77yM6ZyA6KaB6L+b6KGM5a+55bqU55qE6KeG5Zu+5pu05paw77yI5LiN5Yi35paw6aG16Z2i5pu05paw57uE5Lu277yJCiAgaWYgKFsidXNlciIsICJyb2xlIl0uaW5jbHVkZXMocmVzcG9uc2UuY29uZmlnLnVybCkgJiYgcmVzcG9uc2UuY29uZmlnLm1ldGhvZCA9PT0gInB1dCIpIHsKICAgIHZhciB1c2VySW5mbyA9IHN0b3JlLmdldChwcm9jZXNzLmVudi5WVUVfQVBQX1VTRVJfSU5GTyk7CiAgICB2YXIgcmVzdWx0RGF0YSA9IHJlc3BvbnNlLmRhdGEuZGF0YS5yZXN1bHQ7CgogICAgaWYgKHVzZXJJbmZvLmlkID09PSByZXN1bHREYXRhLmlkIHx8IHVzZXJJbmZvLnJvbGUgPT09IHJlc3VsdERhdGEuaWQpIHsKICAgICAgLy/pnIDopoHlnKjop4blm77kuIrlsZXnpLrnmoTkv6Hmga/nmoTlrZfmrrUKICAgICAgdmFyIG1vZGlmeUluZm9GZWlsZCA9IFsidXNlcm5hbWUiLCAic3RhdHVzIiwgInJvbGVOYW1lIiwgInJvbGVBdXRoIl07IC8v5L+u5pS555qE5L+h5oGv5a2X5q615LiObG9jYWxzdG9yYWdl55qE5L+h5oGv5a2X5q615q+U5a+577yM5a2X5q615pWw5o2u5pS55Y+Y55qE5LiA6aG55ou/5Ye65p2lCgogICAgICBPYmplY3QuZW50cmllcyhyZXN1bHREYXRhKS5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICBpZiAobW9kaWZ5SW5mb0ZlaWxkLmluY2x1ZGVzKGl0ZW1bMF0pICYmIHVzZXJJbmZvW2l0ZW1bMF1dICE9PSBpdGVtWzFdKSB7CiAgICAgICAgICAvL+WwhnVzZXJJbmZv5Lit6KKr5L+u5pS555qE5pWw5o2u5a2X5q615pu/5o2iCiAgICAgICAgICB1c2VySW5mb1tpdGVtWzBdXSA9IGl0ZW1bMV07CiAgICAgICAgfQogICAgICB9KTsgLy/mnKzlnLDlrZjlgqh1c2VySW5mbwoKICAgICAgU3RvcmUuY29tbWl0KCJTRVRfVVNFUklORk8iLCB7CiAgICAgICAgdXNlckluZm86IHVzZXJJbmZvCiAgICAgIH0pOwoKICAgICAgaWYgKHJlc3BvbnNlLmNvbmZpZy51cmwgPT09ICJyb2xlIikgewogICAgICAgIC8v5aaC5p6c5L+u5pS555qE5piv5b2T5YmN6KeS6Imy5L+h5oGv5YiZ6ZyA6KaB5pu05paw6Lev55SxCiAgICAgICAgcmVzZXRSb3V0ZXIoKTsKCiAgICAgICAgdmFyIF9zdG9yZSRnZXQzID0gc3RvcmUuZ2V0KHByb2Nlc3MuZW52LlZVRV9BUFBfVVNFUl9JTkZPKSwKICAgICAgICAgICAgcm9sZUF1dGggPSBfc3RvcmUkZ2V0My5yb2xlQXV0aDsKCiAgICAgICAgU3RvcmUuZGlzcGF0Y2goJ3Blcm1pc3Npb24vY29tcGFyaXNvbkFuZFNldFVwUm91dGVzJywgcm9sZUF1dGgpOwogICAgICB9IGVsc2UgewogICAgICAgIC8v5aaC5p6c5L+u5pS555qE5piv5b2T5YmN55So5oi35L+h5oGv5YiZ6ZyA6KaB5pu05pawSGVhZGVy5bGV56S655qE5pWw5o2uCiAgICAgICAgVnVlLnByb3RvdHlwZS4kYnVzLiRlbWl0KCJoZWFkZXJDbXBvbmVudFVwZGF0ZSIpOwogICAgICB9CiAgICB9CiAgfSAvL+WJpeemu+acgOWkluWxggoKCiAgcmV0dXJuIHJlc3BvbnNlID09PSBudWxsIHx8IHJlc3BvbnNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXNwb25zZS5kYXRhOwp9LCBmdW5jdGlvbiAoZXJyKSB7CiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycik7Cn0pOwpleHBvcnQgZGVmYXVsdCBpbnN0YW5jZTs="},{"version":3,"names":["axios","store","Store","Vue","resetRouter","instance","create","baseURL","timeout","process","env","VUE_APP_TIME_OUT","interceptors","request","use","config","token","get","VUE_APP_USER_INFO","status","headers","includes","method","type","message","Promise","reject","err","response","url","userInfo","resultData","data","result","id","role","modifyInfoFeild","Object","entries","filter","item","commit","roleAuth","dispatch","prototype","$bus","$emit"],"sources":["C:/Users/Administrator/Desktop/电商管理/background-manage-system/src/api/common.js"],"sourcesContent":["import axios from \"axios\"\r\nimport store from \"store\"\r\nimport Store from \"@/store\"\r\nimport Vue from 'vue'\r\nimport { Message } from 'element-ui'\r\nimport { resetRouter } from \"@/util/resetRouter\"\r\n//axios默认值\r\nconst instance = axios.create({\r\n  baseURL: \"/api\",\r\n  timeout: process.env.VUE_APP_TIME_OUT\r\n})\r\n\r\n//request 拦截器\r\ninstance.interceptors.request.use(async config => {\r\n  const token = store.get(process.env.VUE_APP_USER_INFO)?.token\r\n  const status = store.get(process.env.VUE_APP_USER_INFO)?.status\r\n  if (token) {\r\n    config.headers['Authorization'] = `Bearer ${token}`\r\n  }\r\n  //如果当前用户被禁用，那么所有增删改操作无法进行\r\n  if ([\"delete\", \"put\", \"post\"].includes(config.method) && status === 0) {\r\n    Message({\r\n      type: 'warning',\r\n      message: '当前用户已被禁用，无法进行操作'\r\n    })\r\n    //中断请求\r\n    return Promise.reject(\"当前用户已被禁用，无法进行操作\")\r\n  }\r\n\r\n  return config\r\n}, err => {\r\n  return Promise.reject(err)\r\n})\r\n\r\n//response 拦截器\r\ninstance.interceptors.response.use(response => {\r\n  // 如果是修改当前角色或者用户信息，需要进行对应的视图更新（不刷新页面更新组件）\r\n  if ([\"user\", \"role\"].includes(response.config.url) && response.config.method === \"put\") {\r\n    const userInfo = store.get(process.env.VUE_APP_USER_INFO)\r\n    const resultData = response.data.data.result\r\n    if (userInfo.id === resultData.id || userInfo.role === resultData.id) {\r\n      //需要在视图上展示的信息的字段\r\n      const modifyInfoFeild = [\"username\", \"status\", \"roleName\", \"roleAuth\"]\r\n      //修改的信息字段与localstorage的信息字段比对，字段数据改变的一项拿出来\r\n      Object.entries(resultData).filter(item => {\r\n        if (modifyInfoFeild.includes(item[0]) && userInfo[item[0]] !== item[1]) {\r\n          //将userInfo中被修改的数据字段替换\r\n          userInfo[item[0]] = item[1]\r\n        }\r\n      })\r\n      //本地存储userInfo\r\n      Store.commit(\"SET_USERINFO\", { userInfo })\r\n      if (response.config.url === \"role\") {\r\n        //如果修改的是当前角色信息则需要更新路由\r\n        resetRouter()\r\n        const { roleAuth } = store.get(process.env.VUE_APP_USER_INFO)\r\n        Store.dispatch('permission/comparisonAndSetUpRoutes', roleAuth)\r\n      } else {\r\n        //如果修改的是当前用户信息则需要更新Header展示的数据\r\n        Vue.prototype.$bus.$emit(\"headerCmponentUpdate\")\r\n      }\r\n    }\r\n  }\r\n\r\n  //剥离最外层\r\n  return response?.data\r\n}, err => {\r\n  return Promise.reject(err)\r\n})\r\nexport default instance\r\n"],"mappings":";;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,OAAOC,GAAP,MAAgB,KAAhB;AAEA,SAASC,WAAT,QAA4B,oBAA5B,C,CACA;;AACA,IAAMC,QAAQ,GAAGL,KAAK,CAACM,MAAN,CAAa;EAC5BC,OAAO,EAAE,MADmB;EAE5BC,OAAO,EAAEC,OAAO,CAACC,GAAR,CAAYC;AAFO,CAAb,CAAjB,C,CAKA;;AACAN,QAAQ,CAACO,YAAT,CAAsBC,OAAtB,CAA8BC,GAA9B;EAAA,sEAAkC,iBAAMC,MAAN;IAAA;;IAAA;IAAA;MAAA;QAAA;UAAA;YAC1BC,KAD0B,iBAClBf,KAAK,CAACgB,GAAN,CAAUR,OAAO,CAACC,GAAR,CAAYQ,iBAAtB,CADkB,+CAClB,WAA0CF,KADxB;YAE1BG,MAF0B,kBAEjBlB,KAAK,CAACgB,GAAN,CAAUR,OAAO,CAACC,GAAR,CAAYQ,iBAAtB,CAFiB,gDAEjB,YAA0CC,MAFzB;;YAGhC,IAAIH,KAAJ,EAAW;cACTD,MAAM,CAACK,OAAP,CAAe,eAAf,qBAA4CJ,KAA5C;YACD,CAL+B,CAMhC;;;YANgC,MAO5B,CAAC,QAAD,EAAW,KAAX,EAAkB,MAAlB,EAA0BK,QAA1B,CAAmCN,MAAM,CAACO,MAA1C,KAAqDH,MAAM,KAAK,CAPpC;cAAA;cAAA;YAAA;;YAQ9B,SAAQ;cACNI,IAAI,EAAE,SADA;cAENC,OAAO,EAAE;YAFH,CAAR,EAR8B,CAY9B;;;YAZ8B,iCAavBC,OAAO,CAACC,MAAR,CAAe,iBAAf,CAbuB;;UAAA;YAAA,iCAgBzBX,MAhByB;;UAAA;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,CAAlC;;EAAA;IAAA;EAAA;AAAA,KAiBG,UAAAY,GAAG,EAAI;EACR,OAAOF,OAAO,CAACC,MAAR,CAAeC,GAAf,CAAP;AACD,CAnBD,E,CAqBA;;AACAtB,QAAQ,CAACO,YAAT,CAAsBgB,QAAtB,CAA+Bd,GAA/B,CAAmC,UAAAc,QAAQ,EAAI;EAC7C;EACA,IAAI,CAAC,MAAD,EAAS,MAAT,EAAiBP,QAAjB,CAA0BO,QAAQ,CAACb,MAAT,CAAgBc,GAA1C,KAAkDD,QAAQ,CAACb,MAAT,CAAgBO,MAAhB,KAA2B,KAAjF,EAAwF;IACtF,IAAMQ,QAAQ,GAAG7B,KAAK,CAACgB,GAAN,CAAUR,OAAO,CAACC,GAAR,CAAYQ,iBAAtB,CAAjB;IACA,IAAMa,UAAU,GAAGH,QAAQ,CAACI,IAAT,CAAcA,IAAd,CAAmBC,MAAtC;;IACA,IAAIH,QAAQ,CAACI,EAAT,KAAgBH,UAAU,CAACG,EAA3B,IAAiCJ,QAAQ,CAACK,IAAT,KAAkBJ,UAAU,CAACG,EAAlE,EAAsE;MACpE;MACA,IAAME,eAAe,GAAG,CAAC,UAAD,EAAa,QAAb,EAAuB,UAAvB,EAAmC,UAAnC,CAAxB,CAFoE,CAGpE;;MACAC,MAAM,CAACC,OAAP,CAAeP,UAAf,EAA2BQ,MAA3B,CAAkC,UAAAC,IAAI,EAAI;QACxC,IAAIJ,eAAe,CAACf,QAAhB,CAAyBmB,IAAI,CAAC,CAAD,CAA7B,KAAqCV,QAAQ,CAACU,IAAI,CAAC,CAAD,CAAL,CAAR,KAAsBA,IAAI,CAAC,CAAD,CAAnE,EAAwE;UACtE;UACAV,QAAQ,CAACU,IAAI,CAAC,CAAD,CAAL,CAAR,GAAoBA,IAAI,CAAC,CAAD,CAAxB;QACD;MACF,CALD,EAJoE,CAUpE;;MACAtC,KAAK,CAACuC,MAAN,CAAa,cAAb,EAA6B;QAAEX,QAAQ,EAARA;MAAF,CAA7B;;MACA,IAAIF,QAAQ,CAACb,MAAT,CAAgBc,GAAhB,KAAwB,MAA5B,EAAoC;QAClC;QACAzB,WAAW;;QACX,kBAAqBH,KAAK,CAACgB,GAAN,CAAUR,OAAO,CAACC,GAAR,CAAYQ,iBAAtB,CAArB;QAAA,IAAQwB,QAAR,eAAQA,QAAR;;QACAxC,KAAK,CAACyC,QAAN,CAAe,qCAAf,EAAsDD,QAAtD;MACD,CALD,MAKO;QACL;QACAvC,GAAG,CAACyC,SAAJ,CAAcC,IAAd,CAAmBC,KAAnB,CAAyB,sBAAzB;MACD;IACF;EACF,CA3B4C,CA6B7C;;;EACA,OAAOlB,QAAP,aAAOA,QAAP,uBAAOA,QAAQ,CAAEI,IAAjB;AACD,CA/BD,EA+BG,UAAAL,GAAG,EAAI;EACR,OAAOF,OAAO,CAACC,MAAR,CAAeC,GAAf,CAAP;AACD,CAjCD;AAkCA,eAAetB,QAAf"}]}