{"map":"{\"version\":3,\"sources\":[\"app.50bea23a4f8df1f8b04b.hot-update.js\"],\"names\":[\"webpackHotUpdate\",\"./src/api/common.js\",\"module\",\"__webpack_exports__\",\"__webpack_require__\",\"eval\"],\"mappings\":\"AAAAA,iBAAiB,MAAM,CAEjBC;;;;gCAKA,SAAUC,OAAQC,oBAAqBC,qBAE7C,aACAC,KAAK\"}","code":"webpackHotUpdate(\"app\",{\"./src/api/common.js\":\n/*!***************************!*\\\n  !*** ./src/api/common.js ***!\n  \\***************************/\n/*! exports provided: default */function(module,__webpack_exports__,__webpack_require__){\"use strict\";eval('__webpack_require__.r(__webpack_exports__);\\n/* harmony import */ var C_Users_Administrator_Desktop_background_manage_system_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js */ \"./node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\");\\n/* harmony import */ var element_ui_lib_theme_chalk_message_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! element-ui/lib/theme-chalk/message.css */ \"./node_modules/element-ui/lib/theme-chalk/message.css\");\\n/* harmony import */ var element_ui_lib_theme_chalk_message_css__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(element_ui_lib_theme_chalk_message_css__WEBPACK_IMPORTED_MODULE_1__);\\n/* harmony import */ var element_ui_lib_theme_chalk_base_css__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! element-ui/lib/theme-chalk/base.css */ \"./node_modules/element-ui/lib/theme-chalk/base.css\");\\n/* harmony import */ var element_ui_lib_theme_chalk_base_css__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(element_ui_lib_theme_chalk_base_css__WEBPACK_IMPORTED_MODULE_2__);\\n/* harmony import */ var element_ui_lib_message__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! element-ui/lib/message */ \"./node_modules/element-ui/lib/message.js\");\\n/* harmony import */ var element_ui_lib_message__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(element_ui_lib_message__WEBPACK_IMPORTED_MODULE_3__);\\n/* harmony import */ var C_Users_Administrator_Desktop_background_manage_system_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ \"./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\");\\n/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! core-js/modules/es.array.includes.js */ \"./node_modules/core-js/modules/es.array.includes.js\");\\n/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_5__);\\n/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"./node_modules/core-js/modules/es.object.to-string.js\");\\n/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_6__);\\n/* harmony import */ var core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! core-js/modules/es.array.filter.js */ \"./node_modules/core-js/modules/es.array.filter.js\");\\n/* harmony import */ var core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_7__);\\n/* harmony import */ var core_js_modules_es_object_entries_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! core-js/modules/es.object.entries.js */ \"./node_modules/core-js/modules/es.object.entries.js\");\\n/* harmony import */ var core_js_modules_es_object_entries_js__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_entries_js__WEBPACK_IMPORTED_MODULE_8__);\\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! axios */ \"./node_modules/axios/index.js\");\\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_9__);\\n/* harmony import */ var store__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! store */ \"./node_modules/store/dist/store.legacy.js\");\\n/* harmony import */ var store__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(store__WEBPACK_IMPORTED_MODULE_10__);\\n/* harmony import */ var _store__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @/store */ \"./src/store/index.js\");\\n/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! vue */ \"./node_modules/vue/dist/vue.runtime.esm.js\");\\n/* harmony import */ var _util_resetRouter__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @/util/resetRouter */ \"./src/util/resetRouter.js\");\\n/* harmony import */ var nprogress__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! nprogress */ \"./node_modules/nprogress/nprogress.js\");\\n/* harmony import */ var nprogress__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(nprogress__WEBPACK_IMPORTED_MODULE_14__);\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n //axios默认值\\n\\nvar instance = axios__WEBPACK_IMPORTED_MODULE_9___default.a.create({\\n  baseURL: \"http://localhost:3300\",\\n  timeout: \"5000s\"\\n}); //request 拦截器\\n\\ninstance.interceptors.request.use( /*#__PURE__*/function () {\\n  var _ref = Object(C_Users_Administrator_Desktop_background_manage_system_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"])( /*#__PURE__*/Object(C_Users_Administrator_Desktop_background_manage_system_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])().mark(function _callee(config) {\\n    var _store$get, _store$get2, _store$get3;\\n\\n    var token, status, roleName;\\n    return Object(C_Users_Administrator_Desktop_background_manage_system_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])().wrap(function _callee$(_context) {\\n      while (1) {\\n        switch (_context.prev = _context.next) {\\n          case 0:\\n            token = (_store$get = store__WEBPACK_IMPORTED_MODULE_10___default.a.get(\"background_manage_userInfo\")) === null || _store$get === void 0 ? void 0 : _store$get.token;\\n            status = (_store$get2 = store__WEBPACK_IMPORTED_MODULE_10___default.a.get(\"background_manage_userInfo\")) === null || _store$get2 === void 0 ? void 0 : _store$get2.status;\\n            roleName = (_store$get3 = store__WEBPACK_IMPORTED_MODULE_10___default.a.get(\"background_manage_userInfo\")) === null || _store$get3 === void 0 ? void 0 : _store$get3.roleName;\\n\\n            if (token) {\\n              config.headers[\\'Authorization\\'] = \"Bearer \".concat(token);\\n            } //如果当前用户(除超级管理员外)被禁用，那么所有增删改操作无法进行\\n\\n\\n            if (!([\"delete\", \"put\", \"post\"].includes(config.method) && status === 0 && roleName !== \"超级管理员\")) {\\n              _context.next = 7;\\n              break;\\n            }\\n\\n            element_ui_lib_message__WEBPACK_IMPORTED_MODULE_3___default()({\\n              type: \\'warning\\',\\n              message: \\'当前用户已被禁用，无法进行操作\\'\\n            }); //中断请求\\n\\n\\n            return _context.abrupt(\"return\", Promise.reject(\"当前用户已被禁用，无法进行操作\"));\\n\\n          case 7:\\n            nprogress__WEBPACK_IMPORTED_MODULE_14___default.a.start();\\n            return _context.abrupt(\"return\", config);\\n\\n          case 9:\\n          case \"end\":\\n            return _context.stop();\\n        }\\n      }\\n    }, _callee);\\n  }));\\n\\n  return function (_x) {\\n    return _ref.apply(this, arguments);\\n  };\\n}(), function (err) {\\n  return Promise.reject(err);\\n}); //response 拦截器\\n\\ninstance.interceptors.response.use(function (response) {\\n  // 如果是修改当前角色或者用户信息，需要进行对应的视图更新（不刷新页面更新组件）\\n  if ([\"user\", \"role\"].includes(response.config.url) && response.config.method === \"put\") {\\n    var userInfo = store__WEBPACK_IMPORTED_MODULE_10___default.a.get(\"background_manage_userInfo\");\\n    var resultData = response.data.data.result;\\n\\n    if (userInfo.id === resultData.id || userInfo.role === resultData.id) {\\n      //需要在视图上展示的信息的字段\\n      var modifyInfoFeild = [\"username\", \"status\", \"roleName\", \"roleAuth\"]; //修改的信息字段与localstorage的信息字段比对，字段数据改变的一项拿出来\\n\\n      Object.entries(resultData).filter(function (item) {\\n        if (modifyInfoFeild.includes(item[0]) && userInfo[item[0]] !== item[1]) {\\n          //将userInfo中被修改的数据字段替换\\n          userInfo[item[0]] = item[1];\\n        }\\n      }); //本地存储userInfo\\n\\n      _store__WEBPACK_IMPORTED_MODULE_11__[\"default\"].commit(\"SET_USERINFO\", {\\n        userInfo: userInfo\\n      });\\n\\n      if (response.config.url === \"role\") {\\n        //如果修改的是当前角色信息则需要更新路由\\n        Object(_util_resetRouter__WEBPACK_IMPORTED_MODULE_13__[\"resetRouter\"])();\\n\\n        var _store$get4 = store__WEBPACK_IMPORTED_MODULE_10___default.a.get(\"background_manage_userInfo\"),\\n            roleAuth = _store$get4.roleAuth;\\n\\n        _store__WEBPACK_IMPORTED_MODULE_11__[\"default\"].dispatch(\\'permission/comparisonAndSetUpRoutes\\', roleAuth);\\n      } else {\\n        //如果修改的是当前用户信息则需要更新Header展示的数据\\n        vue__WEBPACK_IMPORTED_MODULE_12__[\"default\"].prototype.$bus.$emit(\"headerCmponentUpdate\");\\n      }\\n    }\\n  }\\n\\n  nprogress__WEBPACK_IMPORTED_MODULE_14___default.a.done(); //剥离最外层\\n\\n  return response === null || response === void 0 ? void 0 : response.data;\\n}, function (err) {\\n  return Promise.reject(err);\\n});\\n/* harmony default export */ __webpack_exports__[\"default\"] = (instance);//# sourceURL=[module]\\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYXBpL2NvbW1vbi5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9hcGkvY29tbW9uLmpzPzI5MzQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGF4aW9zIGZyb20gXCJheGlvc1wiXHJcbmltcG9ydCBzdG9yZSBmcm9tIFwic3RvcmVcIlxyXG5pbXBvcnQgU3RvcmUgZnJvbSBcIkAvc3RvcmVcIlxyXG5pbXBvcnQgVnVlIGZyb20gJ3Z1ZSdcclxuaW1wb3J0IHsgTWVzc2FnZSB9IGZyb20gJ2VsZW1lbnQtdWknXHJcbmltcG9ydCB7IHJlc2V0Um91dGVyIH0gZnJvbSBcIkAvdXRpbC9yZXNldFJvdXRlclwiXHJcbmltcG9ydCBOUHJvZ3Jlc3MgZnJvbSAnbnByb2dyZXNzJ1xyXG4vL2F4aW9z6buY6K6k5YC8XHJcbmNvbnN0IGluc3RhbmNlID0gYXhpb3MuY3JlYXRlKHtcclxuICBiYXNlVVJMOiBwcm9jZXNzLmVudi5WVUVfQVBQX0JBU0VfVVJMLFxyXG4gIHRpbWVvdXQ6IHByb2Nlc3MuZW52LlZVRV9BUFBfVElNRV9PVVRcclxufSlcclxuXHJcbi8vcmVxdWVzdCDmi6bmiKrlmahcclxuaW5zdGFuY2UuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKGFzeW5jIGNvbmZpZyA9PiB7XHJcbiAgY29uc3QgdG9rZW4gPSBzdG9yZS5nZXQocHJvY2Vzcy5lbnYuVlVFX0FQUF9VU0VSX0lORk8pPy50b2tlblxyXG4gIGNvbnN0IHN0YXR1cyA9IHN0b3JlLmdldChwcm9jZXNzLmVudi5WVUVfQVBQX1VTRVJfSU5GTyk/LnN0YXR1c1xyXG4gIGNvbnN0IHJvbGVOYW1lID0gc3RvcmUuZ2V0KHByb2Nlc3MuZW52LlZVRV9BUFBfVVNFUl9JTkZPKT8ucm9sZU5hbWVcclxuICBpZiAodG9rZW4pIHtcclxuICAgIGNvbmZpZy5oZWFkZXJzWydBdXRob3JpemF0aW9uJ10gPSBgQmVhcmVyICR7dG9rZW59YFxyXG4gIH1cclxuICAvL+WmguaenOW9k+WJjeeUqOaItyjpmaTotoXnuqfnrqHnkIblkZjlpJYp6KKr56aB55So77yM6YKj5LmI5omA5pyJ5aKe5Yig5pS55pON5L2c5peg5rOV6L+b6KGMXHJcbiAgaWYgKFtcImRlbGV0ZVwiLCBcInB1dFwiLCBcInBvc3RcIl0uaW5jbHVkZXMoY29uZmlnLm1ldGhvZCkgJiYgc3RhdHVzID09PSAwICYmIHJvbGVOYW1lICE9PSBcIui2hee6p+euoeeQhuWRmFwiKSB7XHJcbiAgICBNZXNzYWdlKHtcclxuICAgICAgdHlwZTogJ3dhcm5pbmcnLFxyXG4gICAgICBtZXNzYWdlOiAn5b2T5YmN55So5oi35bey6KKr56aB55So77yM5peg5rOV6L+b6KGM5pON5L2cJ1xyXG4gICAgfSlcclxuICAgIC8v5Lit5pat6K+35rGCXHJcbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoXCLlvZPliY3nlKjmiLflt7LooqvnpoHnlKjvvIzml6Dms5Xov5vooYzmk43kvZxcIilcclxuICB9XHJcbiAgTlByb2dyZXNzLnN0YXJ0KClcclxuICByZXR1cm4gY29uZmlnXHJcbn0sIGVyciA9PiB7XHJcbiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycilcclxufSlcclxuXHJcbi8vcmVzcG9uc2Ug5oum5oiq5ZmoXHJcbmluc3RhbmNlLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UocmVzcG9uc2UgPT4ge1xyXG4gIC8vIOWmguaenOaYr+S/ruaUueW9k+WJjeinkuiJsuaIluiAheeUqOaIt+S/oeaBr++8jOmcgOimgei/m+ihjOWvueW6lOeahOinhuWbvuabtOaWsO+8iOS4jeWIt+aWsOmhtemdouabtOaWsOe7hOS7tu+8iVxyXG4gIGlmIChbXCJ1c2VyXCIsIFwicm9sZVwiXS5pbmNsdWRlcyhyZXNwb25zZS5jb25maWcudXJsKSAmJiByZXNwb25zZS5jb25maWcubWV0aG9kID09PSBcInB1dFwiKSB7XHJcbiAgICBjb25zdCB1c2VySW5mbyA9IHN0b3JlLmdldChwcm9jZXNzLmVudi5WVUVfQVBQX1VTRVJfSU5GTylcclxuICAgIGNvbnN0IHJlc3VsdERhdGEgPSByZXNwb25zZS5kYXRhLmRhdGEucmVzdWx0XHJcbiAgICBpZiAodXNlckluZm8uaWQgPT09IHJlc3VsdERhdGEuaWQgfHwgdXNlckluZm8ucm9sZSA9PT0gcmVzdWx0RGF0YS5pZCkge1xyXG4gICAgICAvL+mcgOimgeWcqOinhuWbvuS4iuWxleekuueahOS/oeaBr+eahOWtl+autVxyXG4gICAgICBjb25zdCBtb2RpZnlJbmZvRmVpbGQgPSBbXCJ1c2VybmFtZVwiLCBcInN0YXR1c1wiLCBcInJvbGVOYW1lXCIsIFwicm9sZUF1dGhcIl1cclxuICAgICAgLy/kv67mlLnnmoTkv6Hmga/lrZfmrrXkuI5sb2NhbHN0b3JhZ2XnmoTkv6Hmga/lrZfmrrXmr5Tlr7nvvIzlrZfmrrXmlbDmja7mlLnlj5jnmoTkuIDpobnmi7/lh7rmnaVcclxuICAgICAgT2JqZWN0LmVudHJpZXMocmVzdWx0RGF0YSkuZmlsdGVyKGl0ZW0gPT4ge1xyXG4gICAgICAgIGlmIChtb2RpZnlJbmZvRmVpbGQuaW5jbHVkZXMoaXRlbVswXSkgJiYgdXNlckluZm9baXRlbVswXV0gIT09IGl0ZW1bMV0pIHtcclxuICAgICAgICAgIC8v5bCGdXNlckluZm/kuK3ooqvkv67mlLnnmoTmlbDmja7lrZfmrrXmm7/mjaJcclxuICAgICAgICAgIHVzZXJJbmZvW2l0ZW1bMF1dID0gaXRlbVsxXVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgICAgLy/mnKzlnLDlrZjlgqh1c2VySW5mb1xyXG4gICAgICBTdG9yZS5jb21taXQoXCJTRVRfVVNFUklORk9cIiwgeyB1c2VySW5mbyB9KVxyXG4gICAgICBpZiAocmVzcG9uc2UuY29uZmlnLnVybCA9PT0gXCJyb2xlXCIpIHtcclxuICAgICAgICAvL+WmguaenOS/ruaUueeahOaYr+W9k+WJjeinkuiJsuS/oeaBr+WImemcgOimgeabtOaWsOi3r+eUsVxyXG4gICAgICAgIHJlc2V0Um91dGVyKClcclxuICAgICAgICBjb25zdCB7IHJvbGVBdXRoIH0gPSBzdG9yZS5nZXQocHJvY2Vzcy5lbnYuVlVFX0FQUF9VU0VSX0lORk8pXHJcbiAgICAgICAgU3RvcmUuZGlzcGF0Y2goJ3Blcm1pc3Npb24vY29tcGFyaXNvbkFuZFNldFVwUm91dGVzJywgcm9sZUF1dGgpXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy/lpoLmnpzkv67mlLnnmoTmmK/lvZPliY3nlKjmiLfkv6Hmga/liJnpnIDopoHmm7TmlrBIZWFkZXLlsZXnpLrnmoTmlbDmja5cclxuICAgICAgICBWdWUucHJvdG90eXBlLiRidXMuJGVtaXQoXCJoZWFkZXJDbXBvbmVudFVwZGF0ZVwiKVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIE5Qcm9ncmVzcy5kb25lKClcclxuICAvL+WJpeemu+acgOWkluWxglxyXG4gIHJldHVybiByZXNwb25zZT8uZGF0YVxyXG59LCBlcnIgPT4ge1xyXG4gIHJldHVybiBQcm9taXNlLnJlamVjdChlcnIpXHJcbn0pXHJcbmV4cG9ydCBkZWZhdWx0IGluc3RhbmNlXHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7QUFLQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFSQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBUUE7QUFDQTtBQUNBO0FBRkE7QUFDQTtBQUNBO0FBWEE7QUFDQTtBQURBO0FBZ0JBO0FBaEJBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFtQkE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\\n//# sourceURL=webpack-internal:///./src/api/common.js\\n')}});","extractedComments":[]}